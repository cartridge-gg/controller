{"type":"system","subtype":"init","cwd":"/home/runner/work/controller/controller","session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","tools":["Task","Bash","Glob","Grep","LS","ExitPlanMode","Read","Edit","MultiEdit","Write","NotebookEdit","TodoWrite","BashOutput","KillBash"],"mcp_servers":[],"model":"claude-sonnet-4-20250514","permissionMode":"default","slash_commands":["commit","pr","add-dir","agents","clear","compact","config","context","cost","doctor","exit","help","ide","init","install-github-app","mcp","memory","migrate-installer","model","output-style","output-style:new","pr-comments","release-notes","resume","status","statusline","bug","review","security-review","upgrade","vim","permissions","hooks","export","logout","login","bashes"],"apiKeySource":"ANTHROPIC_API_KEY","output_style":"default","uuid":"c9824f74-9c90-4464-8475-3a40c78c4e85"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_01Mnhmg9PWfu1SNCZkiiMvyR","type":"message","role":"assistant","content":[{"type":"text","text":"I'll generate a changelog entry for version 0.13.5 by analyzing the git commit range and updating the CHANGELOG.md file."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":2,"cache_creation_input_tokens":6176,"cache_read_input_tokens":10412,"cache_creation":{"ephemeral_5m_input_tokens":6176,"ephemeral_1h_input_tokens":0},"output_tokens":8,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"3fe33b6f-0732-4f5a-a62f-cfffea1c6005"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_01Mnhmg9PWfu1SNCZkiiMvyR","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01Dn5oFofwzo6aB9WQvDrfiE","name":"TodoWrite","input":{"todos":[{"content":"Analyze git commits from v0.13.4 to HEAD","status":"pending"},{"content":"Review commit messages and changes for user-facing features","status":"pending"},{"content":"Generate changelog entry in specified format","status":"pending"},{"content":"Update CHANGELOG.md file","status":"pending"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":2,"cache_creation_input_tokens":6176,"cache_read_input_tokens":10412,"cache_creation":{"ephemeral_5m_input_tokens":6176,"ephemeral_1h_input_tokens":0},"output_tokens":8,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"7fa655c7-4c4d-43d0-ac51-fc78b6d6be29"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01Dn5oFofwzo6aB9WQvDrfiE","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"754ba2d8-91ae-42f6-9b09-7e0cfebe80f3"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_01HdshPEyEF7YZ7vTUCtBgma","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01NFNJbYqZDsqzLNfCxMo11i","name":"TodoWrite","input":{"todos":[{"content":"Analyze git commits from v0.13.4 to HEAD","status":"in_progress"},{"content":"Review commit messages and changes for user-facing features","status":"pending"},{"content":"Generate changelog entry in specified format","status":"pending"},{"content":"Update CHANGELOG.md file","status":"pending"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":5,"cache_creation_input_tokens":206,"cache_read_input_tokens":16588,"cache_creation":{"ephemeral_5m_input_tokens":206,"ephemeral_1h_input_tokens":0},"output_tokens":25,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"d42bd38f-3b84-4e5b-8d7e-2d3f3b69f7d2"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01NFNJbYqZDsqzLNfCxMo11i","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"be763458-4563-4ad0-bcbf-9b1d1ac6ad60"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_012RQ8uieo6PdMkL7vuyixEP","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_019fZrXJz8EeLzz5b3EasoLb","name":"Bash","input":{"command":"git log v0.13.4..HEAD --oneline --no-merges","description":"Get commit history from v0.13.4 to HEAD"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":5,"cache_creation_input_tokens":180,"cache_read_input_tokens":16794,"cache_creation":{"ephemeral_5m_input_tokens":180,"ephemeral_1h_input_tokens":0},"output_tokens":26,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"24f55b11-17e4-42b2-89c1-8d7ba46b614a"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_012RQ8uieo6PdMkL7vuyixEP","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_016nyWt9PawZyRRFe1huCHTR","name":"Bash","input":{"command":"git tag -l | grep \"v0.13.4\"","description":"Verify v0.13.4 tag exists"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":5,"cache_creation_input_tokens":180,"cache_read_input_tokens":16794,"cache_creation":{"ephemeral_5m_input_tokens":180,"ephemeral_1h_input_tokens":0},"output_tokens":26,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"78368ab7-8504-4fff-9808-d26ab5b64054"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_019fZrXJz8EeLzz5b3EasoLb","type":"tool_result","content":"a6c8c992 chore: bump controller-rs to v0.9.3 (#2397)\n98c2b428 chore: sync agent standards (#2393)\ncf987a61 feat: add headless mode support to controller SDK (#2315)\n5b35d408 Expose session GUID fields in keychain callback (#2396)\nfb3c5f6f fix: disconnect and re-authenticate when session rpc_url differs from stored controller (#2395)\nc2229dc2 refactor: consolidate toWasmPolicies into single source of truth (#2394)\n537fa360 fix(security): harden keychain iframe loading and keychain CSP (#2384)\n695bfc17 feat: display quests and achievements tabs only if supported (#2392)\n2208fc0b feat: added close() to ControllerProvider (#2373)\nbd8ff7d6 Always show quantity in starterpack purchase button (#2390)\nb4195554 feat: move asWalletStandard to controller package (#2364)\na4984564 Prepare release: 0.13.4 (#2389)","is_error":false}]},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"8b2a8454-f32d-4338-8170-2856850584ab"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_016nyWt9PawZyRRFe1huCHTR","type":"tool_result","content":"v0.13.4","is_error":false}]},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"e6bb4df6-ef9d-4992-9112-4774e0a2d837"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_01CFobqDmHvpcaBA7u9AMjo7","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01P6vdkBnmmtNuRiocEo4ghu","name":"Bash","input":{"command":"git log v0.13.4..HEAD --pretty=format:\"%h %s\" --no-merges | head -20","description":"Get detailed commit messages with hashes"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":6,"cache_creation_input_tokens":509,"cache_read_input_tokens":16974,"cache_creation":{"ephemeral_5m_input_tokens":509,"ephemeral_1h_input_tokens":0},"output_tokens":24,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"9b71453b-c93b-44ea-96f7-f457ab7964ae"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01P6vdkBnmmtNuRiocEo4ghu","type":"tool_result","content":"a6c8c992 chore: bump controller-rs to v0.9.3 (#2397)\n98c2b428 chore: sync agent standards (#2393)\ncf987a61 feat: add headless mode support to controller SDK (#2315)\n5b35d408 Expose session GUID fields in keychain callback (#2396)\nfb3c5f6f fix: disconnect and re-authenticate when session rpc_url differs from stored controller (#2395)\nc2229dc2 refactor: consolidate toWasmPolicies into single source of truth (#2394)\n537fa360 fix(security): harden keychain iframe loading and keychain CSP (#2384)\n695bfc17 feat: display quests and achievements tabs only if supported (#2392)\n2208fc0b feat: added close() to ControllerProvider (#2373)\nbd8ff7d6 Always show quantity in starterpack purchase button (#2390)\nb4195554 feat: move asWalletStandard to controller package (#2364)\na4984564 Prepare release: 0.13.4 (#2389)","is_error":false}]},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"1a1c7b8a-d1a2-4e2d-8dc2-e45c01880502"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_01AUB5U6xjMDh5nUNxrfXnh9","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01BePS55Jzm4koAtkhftmDc4","name":"TodoWrite","input":{"todos":[{"content":"Analyze git commits from v0.13.4 to HEAD","status":"completed"},{"content":"Review commit messages and changes for user-facing features","status":"in_progress"},{"content":"Generate changelog entry in specified format","status":"pending"},{"content":"Update CHANGELOG.md file","status":"pending"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":4,"cache_creation_input_tokens":387,"cache_read_input_tokens":17483,"cache_creation":{"ephemeral_5m_input_tokens":387,"ephemeral_1h_input_tokens":0},"output_tokens":26,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"795d2895-390b-4f13-9cbd-ab1706f28c55"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01BePS55Jzm4koAtkhftmDc4","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"32c2d6a2-6e41-4513-8cd5-a577e56d754b"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_016aikxMEJXFyPB1DbiL7qQA","type":"message","role":"assistant","content":[{"type":"text","text":"Let me get more detailed information about the significant commits to understand their impact:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":4,"cache_creation_input_tokens":180,"cache_read_input_tokens":17870,"cache_creation":{"ephemeral_5m_input_tokens":180,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"6f752c7a-1120-4d00-b7b5-9103230ec553"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_016aikxMEJXFyPB1DbiL7qQA","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_017nEL3QYGscAsxRXzudQo1G","name":"Bash","input":{"command":"git show --stat cf987a61 --pretty=format:\"%s%n%b\"","description":"Get details for headless mode support commit"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":4,"cache_creation_input_tokens":180,"cache_read_input_tokens":17870,"cache_creation":{"ephemeral_5m_input_tokens":180,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"fcd1fdc1-6afd-47ad-b100-77457d47b1af"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_016aikxMEJXFyPB1DbiL7qQA","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01ArWW8WUbmxeoxfMBcBQqVz","name":"Bash","input":{"command":"git show --stat 5b35d408 --pretty=format:\"%s%n%b\"","description":"Get details for session GUID fields commit"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":4,"cache_creation_input_tokens":180,"cache_read_input_tokens":17870,"cache_creation":{"ephemeral_5m_input_tokens":180,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"65408539-6302-40b0-a5e2-e2d734562213"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_016aikxMEJXFyPB1DbiL7qQA","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_019MJ8deUiaJkUZvbQPyAunR","name":"Bash","input":{"command":"git show --stat fb3c5f6f --pretty=format:\"%s%n%b\"","description":"Get details for session RPC URL fix"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":4,"cache_creation_input_tokens":180,"cache_read_input_tokens":17870,"cache_creation":{"ephemeral_5m_input_tokens":180,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"300fa484-0669-4898-9293-30ddd661487d"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01ArWW8WUbmxeoxfMBcBQqVz","type":"tool_result","content":"Expose session GUID fields in keychain callback (#2396)\n## Summary\n- Expose `allowedPoliciesRoot`, `metadataHash`, `sessionKeyGuid`, and\n`guardianKeyGuid` in keychain session callback payloads for\nalready-registered sessions.\n- Update `SessionResponse` in\n`packages/keychain/src/components/session.tsx` to type these values as\n`JsFelt`.\n- Add a focused unit test in\n`packages/keychain/src/components/session.test.tsx` that decodes the\ncallback payload and verifies all four fields.\n\n## Validation\n- Pre-commit checks passed (lint, test:ci, build, graphql codegen).\n packages/keychain/src/components/session.test.tsx | 120 ++++++++++++++++++++++\n packages/keychain/src/components/session.tsx      |   9 +-\n 2 files changed, 128 insertions(+), 1 deletion(-)","is_error":false}]},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"16ecfcb4-814e-40a6-ad04-fc1b44672157"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_019MJ8deUiaJkUZvbQPyAunR","type":"tool_result","content":"fix: disconnect and re-authenticate when session rpc_url differs from stored controller (#2395)\n## Summary\n\nWhen a session registration request at `/session` includes an `rpc_url`\nparameter (e.g. for mainnet), the controller was not being updated if\nthe user was already logged in on a different chain (e.g. Sepolia). The\nstored controller's rpcUrl was unconditionally overriding the URL\nparameter, causing sessions to be registered on the wrong chain.\n\n### Root Cause\n\nIn `useConnectionValue()`, a `useEffect` unconditionally synced the\n`rpcUrl` state from the stored controller after every render, overriding\nthe URL's `rpc_url` param that was set during render. Additionally, the\ncontroller object itself was bound to the stored chain, so operations\nlike `registerSession()` would execute on the wrong chain regardless of\nthe `rpcUrl` state.\n\n### Fix\n\n- Track if URL explicitly provides an `rpc_url` via a `useMemo`\n- Skip the controller‚ÜírpcUrl sync effect when a URL `rpc_url` is present\n- When the URL `rpc_url` differs from the controller's stored rpcUrl,\n**disconnect the user and clear the controller** so they re-authenticate\non the correct chain\n- Set `rpcUrl` to the URL-provided value before disconnecting, so the\nlogin flow (`CreateController`) targets the correct chain\n- This approach is safer than recreating the controller in-place, since\nthe account may not be deployed on the target chain\n\n### Testing\n\n- Added unit tests for rpc_url priority logic, disconnect-on-mismatch\nbehavior, and guard conditions\n- All 336 existing tests continue to pass\n- TypeScript compiles cleanly\n packages/keychain/src/hooks/connection.test.ts | 108 ++++++++++++++++++++++++-\n packages/keychain/src/hooks/connection.ts      |  29 ++++++-\n 2 files changed, 132 insertions(+), 5 deletions(-)","is_error":false}]},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"d16dc4b3-8850-4382-8573-e854a6db0f0f"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_017nEL3QYGscAsxRXzudQo1G","type":"tool_result","content":"feat: add headless mode support to controller SDK (#2315)\nAdds headless auth support to `controller.connect({ username, signer,\npassword? })`, performing auth in a hidden keychain iframe and only\nopening UI for session approval when required.\n\nKeychain `connect()` routes headless options through a single handler\nthat blocks until approval completes, then triggers `onSessionCreated`\nso the parent app updates immediately.\n\n`@cartridge/connector` now returns the authoritative controller address\nfrom `connect()` and improves disconnect handling to keep\n`@starknet-react/core` state in sync.\n\nVerified-session auto-creation logic is centralized and shared across UI\nconnect, standalone session creation, and headless flows; policy\nprocessing lives in a non-UI utility.\n\nAdds unit/regression tests for connect routing, verified session\ncreation, and connector state sync; CI runs controller Jest tests.\n\n---------\n\nCo-authored-by: Claude Sonnet 4.5 <noreply@anthropic.com>\n .claude/settings.json                              |   1 +\n .gitignore                                         |   1 +\n examples/next/src/components/Header.tsx            |  40 +\n examples/next/src/components/HeadlessLogin.tsx     | 231 ++++++\n examples/next/src/components/Starterpack.tsx       |  13 +-\n .../src/components/providers/StarknetProvider.tsx  |  16 +-\n package.json                                       |   2 +-\n packages/connector/package.json                    |   6 +-\n .../connector/src/__tests__/controller.test.ts     |  90 +++\n packages/connector/src/controller.ts               |  33 +-\n packages/connector/src/session.ts                  |   7 +-\n packages/connector/vitest.config.ts                |   9 +\n packages/controller/HEADLESS_MODE.md               | 113 +++\n .../src/__tests__/headlessConnectApproval.test.ts  |  97 +++\n .../controller/src/__tests__/parseChainId.test.ts  |   2 +-\n packages/controller/src/controller.ts              | 121 ++-\n packages/controller/src/errors.ts                  |  30 +\n packages/controller/src/iframe/base.ts             |   1 +\n packages/controller/src/iframe/keychain.ts         |   6 +-\n packages/controller/src/session/provider.ts        |   1 +\n packages/controller/src/types.ts                   |  31 +-\n packages/keychain/.prettierignore                  |   3 +-\n .../keychain/src/components/ConnectRoute.test.tsx  |  17 +-\n packages/keychain/src/components/ConnectRoute.tsx  |  57 +-\n packages/keychain/src/components/app.tsx           |  18 +-\n .../src/components/connect/CreateSession.tsx       |  42 +-\n .../components/connect/HeadlessApprovalRoute.tsx   |  96 +++\n .../connect/StandaloneSessionCreation.tsx          |   2 +-\n .../connect/create/CreateController.test.tsx       |  14 +\n .../connect/create/useCreateController.ts          |  87 ++-\n .../components/connect/create/webauthn/index.ts    |   1 +\n .../src/components/provider/connection.tsx         |   1 +\n packages/keychain/src/components/session.test.tsx  |   1 +\n packages/keychain/src/hooks/connection.ts          |  89 ++-\n packages/keychain/src/hooks/route.ts               |  21 +-\n packages/keychain/src/test/mocks/connection.tsx    |   1 +\n .../keychain/src/utils/connection/callbacks.ts     |  36 +-\n .../src/utils/connection/connect-routing.test.ts   | 130 ++++\n .../src/utils/connection/connect-routing.ts        | 126 +++\n .../keychain/src/utils/connection/connect.test.ts  | 139 ++++\n packages/keychain/src/utils/connection/connect.ts  |  58 +-\n .../src/utils/connection/headless-requests.test.ts |  48 ++\n .../src/utils/connection/headless-requests.ts      | 134 ++++\n packages/keychain/src/utils/connection/headless.ts | 447 +++++++++++\n packages/keychain/src/utils/connection/index.ts    |  60 +-\n .../src/utils/connection/session-creation.test.ts  | 114 +++\n .../src/utils/connection/session-creation.ts       |  53 ++\n packages/keychain/src/utils/session/policies.ts    |  38 +\n packages/keychain/vitest.config.ts                 |   5 +\n pnpm-lock.yaml                                     | 861 +++++++++++++++------\n 50 files changed, 3173 insertions(+), 377 deletions(-)","is_error":false}]},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"af56cc97-1fcd-4c7d-bdd3-dfe52e6b18c6"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_01Lcgz9Vw46ZzsKRE2itg1XB","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01WpAKJz8FF7eoZQmho1QALj","name":"Bash","input":{"command":"git show --stat 537fa360 --pretty=format:\"%s%n%b\"","description":"Get details for security hardening commit"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":759,"cache_creation_input_tokens":1625,"cache_read_input_tokens":18050,"cache_creation":{"ephemeral_5m_input_tokens":1625,"ephemeral_1h_input_tokens":0},"output_tokens":25,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"d9ab784f-d608-4b03-859c-84c679fdcb95"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_01Lcgz9Vw46ZzsKRE2itg1XB","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01RL5SMFzqRJLKN1aKjJ1s8H","name":"Bash","input":{"command":"git show --stat 2208fc0b --pretty=format:\"%s%n%b\"","description":"Get details for close() method commit"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":759,"cache_creation_input_tokens":1625,"cache_read_input_tokens":18050,"cache_creation":{"ephemeral_5m_input_tokens":1625,"ephemeral_1h_input_tokens":0},"output_tokens":25,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"3750e735-6643-4d7d-9565-e37c5d8538aa"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01RL5SMFzqRJLKN1aKjJ1s8H","type":"tool_result","content":"feat: added close() to ControllerProvider (#2373)\n\n .github/workflows/claude-code-review.yml |  1 -\n examples/next/src/components/Profile.tsx | 10 ++++++++++\n packages/controller/src/controller.ts    |  7 +++++++\n 3 files changed, 17 insertions(+), 1 deletion(-)","is_error":false}]},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"1eef670c-d044-4011-ad41-c12b1158ec08"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01WpAKJz8FF7eoZQmho1QALj","type":"tool_result","content":"fix(security): harden keychain iframe loading and keychain CSP (#2384)\n## Summary\n- Hardened controller iframe setup by validating keychain URLs\n(rejecting non-HTTPS/non-localhost HTTP and credentialed URLs), pinning\nPenpal child origin, and reducing iframe feature grants by default.\n- Added focused unit tests for iframe URL validation and allow-list\ngeneration to prevent regressions.\n- Added keychain CSP/security headers and removed inline scripts from\nindex.html by moving logic into static JS assets.\n\n## Security Impact\n- Reduces risk of loading unsafe iframe sources (`javascript:`, `data:`,\nremote `http:`).\n- Reduces over-broad iframe permissions (`local-network-access` now\nlocalhost-only).\n- Applies defense-in-depth content policy in keychain via CSP and\nbaseline hardening headers.\n\n## Testing\n- [x] Ran `pnpm lint:check`\n- [x] Ran `pnpm --filter @cartridge/controller test -- iframeSecurity`\n- [x] Ran `pnpm --filter @cartridge/controller test` (fails on existing\nunrelated parseChainId.test.ts invalid URL case)\n- [ ] Ran `pnpm --filter @cartridge/keychain build` (currently fails due\npre-existing type export mismatches in keychain)\n\n## Self-Review\n- Checked that localhost dev flow remains supported (`http://localhost`,\n`127.0.0.1`, `::1`).\n- Kept required iframe sandbox flags for existing storage/session\nbehavior while tightening target/origin handling.\n- Ensured CSP changes avoid inline script requirements by externalizing\nboot scripts.\n .../src/__tests__/iframeSecurity.test.ts           | 84 ++++++++++++++++++++++\n packages/controller/src/iframe/base.ts             | 16 ++++-\n packages/controller/src/iframe/security.ts         | 48 +++++++++++++\n packages/keychain/index.html                       | 43 ++---------\n .../keychain/public/disable-multitouch-zoom.js     | 15 ++++\n packages/keychain/public/init-virtual-keyboard.js  |  3 +\n packages/keychain/vercel.json                      | 21 ++++++\n 7 files changed, 190 insertions(+), 40 deletions(-)","is_error":false}]},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"79f285ae-7bf8-49be-a52a-0ae4377b9fbf"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_018RpbPKN82a2Df73sQ5Y5We","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01Lp6JYDB184rttKCLhdKbed","name":"Bash","input":{"command":"git show --stat b4195554 --pretty=format:\"%s%n%b\"","description":"Get details for asWalletStandard move commit"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":122,"cache_creation_input_tokens":1539,"cache_read_input_tokens":19675,"cache_creation":{"ephemeral_5m_input_tokens":1539,"ephemeral_1h_input_tokens":0},"output_tokens":25,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"092bca8e-3668-4563-bdc8-53852c41bc60"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01Lp6JYDB184rttKCLhdKbed","type":"tool_result","content":"feat: move asWalletStandard to controller package (#2364)\n## Summary\n\n- Moves `asWalletStandard()` from `@cartridge/connector` to\n`@cartridge/controller`\n- Users who don't use starknet-react can now use wallet standard\ndirectly via the controller\n- The connector now delegates to the controller's implementation\n\n## Context\n\nUsers trying to install `@cartridge/connector` without starknet-react\nwere getting peer dependency errors. The `asWalletStandard()` helper was\nthe only reason some users needed the connector package, but it doesn't\nactually depend on starknet-react - it uses\n`@starknet-io/get-starknet-wallet-standard` which is independent.\n\n## Usage\n\n```typescript\nimport ControllerProvider from \"@cartridge/controller\";\n\nconst controller = new ControllerProvider({ /* options */ });\nconst walletStandard = controller.asWalletStandard();\n```\n\n## Test plan\n\n- [x] Build passes for both packages\n- [x] Lint/format checks pass\n\nü§ñ Generated with [Claude Code](https://claude.ai/code)\n\n---------\n\nCo-authored-by: Claude Opus 4.5 <noreply@anthropic.com>\n packages/connector/package.json                    |  3 +-\n packages/connector/src/controller.ts               | 14 +---\n packages/controller/package.json                   |  1 +\n .../src/__tests__/asWalletStandard.test.ts         | 87 ++++++++++++++++++++++\n packages/controller/src/controller.ts              | 50 +++++++++++++\n pnpm-lock.yaml                                     | 21 ++----\n 6 files changed, 149 insertions(+), 27 deletions(-)","is_error":false}]},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"34e449b8-ec7a-4b37-8322-cb290682603a"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_01ERHchqMVzEubVhiaLxxoBf","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_019zF48B4AU6jiWVzb4p85nG","name":"TodoWrite","input":{"todos":[{"content":"Analyze git commits from v0.13.4 to HEAD","status":"completed"},{"content":"Review commit messages and changes for user-facing features","status":"completed"},{"content":"Generate changelog entry in specified format","status":"in_progress"},{"content":"Update CHANGELOG.md file","status":"pending"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":675,"cache_read_input_tokens":21214,"cache_creation":{"ephemeral_5m_input_tokens":675,"ephemeral_1h_input_tokens":0},"output_tokens":24,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"2ee4fb8c-a944-4fdc-9963-22d359ef4d30"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_019zF48B4AU6jiWVzb4p85nG","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"23365a16-15df-49f9-b6f0-0989db779c55"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_01GuNsFCcnrDUnsNLCgyscQf","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_019f8N9nF3fNbYgpKERCJndV","name":"Read","input":{"file_path":"/home/runner/work/controller/controller/CHANGELOG.md"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":180,"cache_read_input_tokens":21889,"cache_creation":{"ephemeral_5m_input_tokens":180,"ephemeral_1h_input_tokens":0},"output_tokens":25,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"a8866588-b4ac-4ca0-bf0a-70724654c187"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_019f8N9nF3fNbYgpKERCJndV","type":"tool_result","content":"     1‚Üí# Changelog\n     2‚Üí\n     3‚Üí## [0.13.4] - 2026-02-06\n     4‚Üí\n     5‚Üí### üêõ Bug Fixes\n     6‚Üí- **CI/CD**: Fixed npm publishing with catalog resolution by reverting to pnpm publish, which correctly handles pnpm catalog: protocol that npm publish doesn't support, ensuring proper package resolution in published packages (#77210c65)\n     7‚Üí\n     8‚Üí### üîß Development\n     9‚Üí- **Agent Tooling**: Added standardized agent/dev tooling with `.agents/` directory as source of truth, Claude/Cursor skill compatibility symlinks, and enhanced pre-commit hooks for improved development workflow (#2388)\n    10‚Üí\n    11‚Üí## [0.13.3] - 2026-02-06\n    12‚Üí\n    13‚Üí### ‚ú® New Features\n    14‚Üí- **@cartridge/controller**: Added starterpack play callback functionality enabling custom game launch behavior and improved gaming integration (#2362)\n    15‚Üí- **@cartridge/controller**: Added specialized controller toast notifications with improved messaging and user feedback for iframe-embedded applications (#2358)\n    16‚Üí\n    17‚Üí### üöÄ Improvements\n    18‚Üí- **@cartridge/keychain**: Enhanced iframe connect flow with automatic Storage Access API request for improved cross-domain authentication in WebView environments (#2374)\n    19‚Üí- **@cartridge/keychain**: Tightened Capacitor origin verification to only auto-verify localhost, requiring explicit authorization for custom hostnames in presets for enhanced security (#2375)\n    20‚Üí- **@cartridge/controller**: Improved policy handling with canonical sorting before hashing to ensure consistent policy processing and prevent non-deterministic merkle root calculations (#2359)\n    21‚Üí- **@cartridge/controller**: Enhanced preset verification for Capacitor environments with better validation and support for capacitor:// scheme (#2369)\n    22‚Üí\n    23‚Üí### üêõ Bug Fixes\n    24‚Üí- **@cartridge/controller**: Added ApprovalPolicy support to controller toWasmPolicies for proper merkle root calculation across different connectors, fixing session registration mismatches (#2372)\n    25‚Üí- **@cartridge/controller**: Fixed aggregate contracts display on unverified session to properly group methods into \"Approve <game>\" expendable cards (#2304)\n    26‚Üí- **@cartridge/controller**: Fixed controller re-initialization issues by reusing existing controller instances to prevent duplicate iframes and message channels (#2360)\n    27‚Üí- **@cartridge/controller**: Fixed chain ID lookup to support non-Cartridge chain configurations for better multi-chain compatibility (#2361)\n    28‚Üí- **@cartridge/keychain**: Fixed Coinbase sandbox configuration to ensure proper sandbox environment setup (#2371)\n    29‚Üí- **@cartridge/keychain**: Fixed password login button alignment with primary theme for consistent UI styling (#2385)\n    30‚Üí\n    31‚Üí## [0.13.2] - 2026-02-06\n    32‚Üí\n    33‚Üí### üêõ Bug Fixes\n    34‚Üí- **@cartridge/controller, @cartridge/connector**: Added repository field to package.json files for npm OIDC trusted publishing, ensuring proper package verification and supply chain security (#c9c6f25d)\n    35‚Üí\n    36‚Üí## [0.13.1] - 2026-02-06\n    37‚Üí\n    38‚Üí### üêõ Bug Fixes\n    39‚Üí- **CI/CD**: Fixed npm publishing with OIDC authentication by switching from pnpm publish to npm publish and removing registry-url from setup-node to prevent .npmrc conflicts that block OIDC token exchange (#3880e8ba)\n    40‚Üí\n    41‚Üí## [0.13.0] - 2026-02-06\n    42‚Üí\n    43‚Üí### ‚ú® New Features\n    44‚Üí- **@cartridge/controller**: Added ApprovalPolicy support to controller toWasmPolicies for enhanced policy management and proper merkle root calculation across different connectors (#2372)\n    45‚Üí- **@cartridge/controller**: Added starterpack play callback functionality enabling custom game launch behavior and improved gaming integration (#2362)\n    46‚Üí- **@cartridge/controller**: Added specialized controller toast notifications with improved messaging and user feedback for iframe-embedded applications (#2358)\n    47‚Üí\n    48‚Üí### üöÄ Improvements\n    49‚Üí- **@cartridge/keychain**: Enhanced iframe connect flow with automatic Storage Access API request for improved cross-domain authentication in WebView environments (#2374)\n    50‚Üí- **@cartridge/keychain**: Tightened Capacitor origin verification to only auto-verify localhost, requiring explicit authorization for custom hostnames in presets for enhanced security (#2375)\n    51‚Üí- **@cartridge/controller**: Improved policy handling with canonical sorting before hashing to ensure consistent policy processing and prevent non-deterministic merkle root calculations (#2359)\n    52‚Üí- **@cartridge/controller**: Enhanced preset verification for Capacitor environments with better validation and support for capacitor:// scheme (#2369)\n    53‚Üí- **Development**: Migrated npm publishing to OIDC authentication with supply chain provenance attestation for enhanced security (#2381)\n    54‚Üí\n    55‚Üí### üêõ Bug Fixes\n    56‚Üí- **@cartridge/controller**: Fixed aggregate contracts display on unverified session to properly group methods into \"Approve <game>\" expendable cards (#2304)\n    57‚Üí- **@cartridge/controller**: Fixed controller re-initialization issues by reusing existing controller instances to prevent duplicate iframes and message channels (#2360)\n    58‚Üí- **@cartridge/controller**: Fixed chain ID lookup to support non-Cartridge chain configurations for better multi-chain compatibility (#2361)\n    59‚Üí- **@cartridge/keychain**: Fixed Coinbase sandbox configuration to ensure proper sandbox environment setup (#2371)\n    60‚Üí- **CI/CD**: Fixed release workflow race conditions by inlining changelog generation into release dispatch workflow (#2379)\n    61‚Üí\n    62‚Üí## [0.12.3] - 2026-02-05\n    63‚Üí\n    64‚Üí### ‚ú® New Features\n    65‚Üí- **@cartridge/keychain**: Added Capacitor origin verification tightening for enhanced security in mobile environments (#2375)\n    66‚Üí- **@cartridge/controller**: Added specialized controller toast notifications with improved messaging and user feedback (#2358)\n    67‚Üí- **@cartridge/controller**: Added ApprovalPolicy support to controller toWasmPolicies for enhanced policy management (#2372)\n    68‚Üí- **@cartridge/controller**: Added starterpack play callback functionality for improved gaming integration (#2362)\n    69‚Üí\n    70‚Üí### üöÄ Improvements  \n    71‚Üí- **@cartridge/keychain**: Enhanced iframe connect flow with automatic storage access request for improved cross-domain authentication (#2374)\n    72‚Üí- **@cartridge/controller**: Improved policy handling with canonical sorting before hashing to ensure consistent policy processing (#2359)\n    73‚Üí- **@cartridge/controller**: Enhanced preset verification for Capacitor environments with better validation (#2369)\n    74‚Üí\n    75‚Üí### üêõ Bug Fixes\n    76‚Üí- **@cartridge/controller**: Fixed aggregate contracts on unverified session to prevent session-related issues (#2304)\n    77‚Üí- **@cartridge/keychain**: Fixed Coinbase sandbox configuration to ensure proper sandbox environment setup (#2371)\n    78‚Üí- **@cartridge/controller**: Fixed controller re-initialization issues by reusing existing controller instances (#2360)\n    79‚Üí- **@cartridge/controller**: Fixed chain ID lookup to support non-Cartridge chain configurations (#2361)\n    80‚Üí\n    81‚Üí## [0.12.2] - 2026-01-29\n    82‚Üí\n    83‚Üí### ‚ú® New Features\n    84‚Üí- **Examples**: Added Capacitor session example with iOS app integration, demonstrating mobile session management and providing comprehensive cross-platform development guidance (#2355)\n    85‚Üí- **@cartridge/keychain**: Enhanced Coinbase onramp integration with `createCoinbaseLayerswapOrder` mutation for improved order creation and processing (#2354)\n    86‚Üí- **@cartridge/keychain**: Added comprehensive cost breakdown display for Apple Pay purchases, showing detailed fee structure including Coinbase fees and bridge fees with real-time pricing from Coinbase Onramp API (#2352)\n    87‚Üí- **@cartridge/keychain**: Added starterpack Apple Pay checkout functionality for streamlined mobile payments (#2339)\n    88‚Üí- **@cartridge/keychain**: Implemented verification autofill functionality for improved user experience during authentication flows (#2342)\n    89‚Üí- **@cartridge/keychain**: Added order fetching by IDs capability for enhanced order management and tracking (#2334)\n    90‚Üí\n    91‚Üí### üöÄ Improvements  \n    92‚Üí- **@cartridge/keychain**: Removed supported-platforms feature gate, making platform detection generally available (#2335)\n    93‚Üí- **Development**: Migrated skills documentation to centralized `.agents/skills` directory for better organization and AI-assisted development workflows (#2353)\n    94‚Üí\n    95‚Üí### üêõ Bug Fixes\n    96‚Üí- **@cartridge/keychain**: Fixed 'proceed with caution' warning visibility for slot login flows, improving user experience (#2351)\n    97‚Üí- **@cartridge/keychain**: Fixed purchase token layout issues for better visual consistency (#2343)\n    98‚Üí- **@cartridge/keychain**: Fixed Layerswap username retrieval from authentication context for proper user identification (#2347)\n    99‚Üí- **@cartridge/keychain**: Fixed Coinbase Terms of Service link for proper legal compliance (#2341)\n   100‚Üí- **@cartridge/keychain**: Fixed Coinbase query handling for improved API integration (#2338)\n   101‚Üí\n   102‚Üí### üì¶ Dependencies\n   103‚Üí- **@cartridge/ui**: Multiple updates for improved design consistency and functionality (#2350, #2348, #2346, #2345, #2344, #2337)\n   104‚Üí\n   105‚Üí## [0.12.1] - 2026-01-07\n   106‚Üí\n   107‚Üí### ‚ú® New Features\n   108‚Üí- **@cartridge/controller**: Added configurable error display modes with `errorDisplayMode` option, enabling developers to control how transaction errors are presented to users with three modes: `modal` (default), `notification` (clickable toast), and `silent` (console only) (#2312)\n   109‚Üí\n   110‚Üí### üöÄ Improvements  \n   111‚Üí- **Development**: Enhanced Claude Code integration with structured skill guides for code review, PR management, testing, Storybook snapshots, and release workflows (#2311, #2310)\n   112‚Üí- **Documentation**: Expanded CLAUDE.md with detailed technology stack versions, build process explanations, and comprehensive development workflow guidance (#2310)\n   113‚Üí\n   114‚Üí### üîß Development\n   115‚Üí- **Build**: Added .worktrees to .gitignore for improved Git worktree support (#2311)\n   116‚Üí- **Claude Integration**: Added comprehensive permissions configuration and skill documentation for streamlined AI-assisted development (#2311, #2310)\n   117‚Üí\n   118‚Üí## [0.12.0] - 2026-01-01\n   119‚Üí\n   120‚Üí### ‚ú® New Features\n   121‚Üí- **@cartridge/controller**: Added dynamic `signupOptions` to `connect()` method, enabling developers to override constructor configuration per connection and create multiple branded authentication flows (e.g., \"Login with Phantom\", \"Login with Google\") using a single Controller instance (#2298)\n   122‚Üí- **@cartridge/keychain**: Added wallet selection drawer for onchain checkout, replacing navigation-based flow with inline slide-up drawer for more seamless UX (#2294)\n   123‚Üí- **@cartridge/keychain**: Added Coinbase onramp integration with `useCoinbase` hook for order creation, transaction queries, and requirement checks with automatic client IP detection (#2296)\n   124‚Üí- **@cartridge/keychain**: Added support for additional payment tokens in starterpack metadata, allowing creators to specify custom payment options beyond default ETH, STRK, and USDC (#2292)\n   125‚Üí\n   126‚Üí### üöÄ Improvements  \n   127‚Üí- **@cartridge/controller**: Enhanced paymaster error handling with graceful fallback to user-pays flow when paymaster is unavailable due to rate limits, execution timing, or other conditions (#2291)\n   128‚Üí- **@cartridge/keychain**: Improved authentication flows with branded button text for single-signer configurations and configurable signup authentication methods (#2290)\n   129‚Üí- **@cartridge/keychain**: Enhanced session management by restoring wildcard session creation during login flows for better user experience (#2302, #637faa12)\n   130‚Üí- **@cartridge/keychain**: Updated Ekubo integration to use new chain ID-based API format for improved swap functionality (#2287)\n   131‚Üí- **@cartridge/keychain**: Improved session footer styling with proper padding and button text updates from \"Create Session\" to \"Continue\" (#2274)\n   132‚Üí\n   133‚Üí### üêõ Bug Fixes\n   134‚Üí- **@cartridge/controller**: Restored `propagateSessionErrors` functionality for contract execution, ensuring errors are properly propagated back to callers instead of showing manual approval modal when enabled (#2305)\n   135‚Üí- **@cartridge/keychain**: Fixed starterpack loading flicker by showing proper loading states during loading/onchain/preimage states (#2297)\n   136‚Üí- **@cartridge/keychain**: Fixed collection pagination issues for better user experience (#2301)\n   137‚Üí- **@cartridge/keychain**: Fixed session management by reverting and then restoring wildcard session creation during register session login for optimal user flow (#2299, #2302)\n   138‚Üí- **@cartridge/keychain**: Fixed Ekubo API CORS issues by specifying proper CORS headers and credentials handling (#2288)\n   139‚Üí\n   140‚Üí### üì¶ Dependencies\n   141‚Üí- **@cartridge/ui**: Updated to latest commits for improved design consistency and React 19 peer dependency support (#2295, #2260)\n   142‚Üí\n   143‚Üí## [0.11.4-alpha.1] - 2025-12-31\n   144‚Üí\n   145‚Üí### ‚ú® New Features\n   146‚Üí- **@cartridge/controller**: Added dynamic `signupOptions` to `connect()` method, enabling developers to override constructor configuration per connection and create multiple branded authentication flows (e.g., \"Login with Phantom\", \"Login with Google\") using a single Controller instance (#2298)\n   147‚Üí- **@cartridge/keychain**: Added wallet selection drawer for onchain checkout, replacing navigation-based flow with inline slide-up drawer for more seamless UX (#2294)\n   148‚Üí- **@cartridge/keychain**: Added Coinbase onramp integration with `useCoinbase` hook for order creation, transaction queries, and requirement checks with automatic client IP detection (#2296)\n   149‚Üí- **@cartridge/keychain**: Added support for additional payment tokens in starterpack metadata, allowing creators to specify custom payment options beyond default ETH, STRK, and USDC (#2292)\n   150‚Üí\n   151‚Üí### üöÄ Improvements  \n   152‚Üí- **@cartridge/controller**: Enhanced paymaster error handling with graceful fallback to user-pays flow when paymaster is unavailable due to rate limits, execution timing, or other conditions (#2291)\n   153‚Üí- **@cartridge/keychain**: Improved authentication flows with branded button text for single-signer configurations and configurable signup authentication methods (#2290, #1b4423c3)\n   154‚Üí- **@cartridge/keychain**: Enhanced session management by restoring wildcard session creation during login flows for better user experience (#2302, #637faa12)\n   155‚Üí- **@cartridge/keychain**: Updated Ekubo integration to use new chain ID-based API format for improved swap functionality (#2287)\n   156‚Üí- **@cartridge/keychain**: Improved session footer styling with proper padding and button text updates from \"Create Session\" to \"Continue\" (#2274)\n   157‚Üí\n   158‚Üí### üêõ Bug Fixes\n   159‚Üí- **@cartridge/controller**: Restored `propagateSessionErrors` functionality for contract execution, ensuring errors are properly propagated back to callers instead of showing manual approval modal when enabled (#2305)\n   160‚Üí- **@cartridge/keychain**: Fixed starterpack loading flicker by showing proper loading states during loading/onchain/preimage states (#2297)\n   161‚Üí- **@cartridge/keychain**: Fixed collection pagination issues for better user experience (#2301)\n   162‚Üí- **@cartridge/keychain**: Fixed controlled Select component warnings in cost breakdown by using proper value handling (#2294)\n   163‚Üí- **@cartridge/keychain**: Fixed Ekubo API CORS issues by specifying proper CORS headers and credentials handling (#2288)\n   164‚Üí\n   165‚Üí### üîß Refactoring\n   166‚Üí- **Development**: Multiple UI component updates and dependency management improvements (#2295, #2260)\n   167‚Üí- **@cartridge/keychain**: Simplified authentication flows by removing complex route-based session skipping logic in favor of consistent wildcard session creation (#2286, #2285)\n   168‚Üí\n   169‚Üí### üì¶ Dependencies\n   170‚Üí- **@cartridge/ui**: Updated to latest commits for improved design consistency and React 19 peer dependency support\n   171‚Üí\n   172‚Üí## [0.11.3] - 2025-12-10\n   173‚Üí\n   174‚Üí### ‚ú® New Features\n   175‚Üí- **@cartridge/keychain**: Added Layerswap cross-chain deposit integration for onchain checkout with balance checks, bridging actions, and UI for conversion/liquidity errors (#2273)\n   176‚Üí- **@cartridge/controller**: Added Phantom EVM wallet authentication method extending EthereumWalletBase, enabling login and signup with Phantom's EVM-compatible mode (#2278)\n   177‚Üí- **@cartridge/controller**: Added toast notification API with ToastType and ToastOptions interfaces, enabling toast creation from the controller SDK (#2265)\n   178‚Üí- **@cartridge/keychain**: Added quests functionality for enhanced gaming features (#2280)\n   179‚Üí\n   180‚Üí### üöÄ Improvements  \n   181‚Üí- **@cartridge/keychain**: Enhanced onchain purchase flow with multi-network wallet selection, improved cost breakdown displaying Layerswap fees, and streamlined navigation (#2273)\n   182‚Üí- **@cartridge/keychain**: Improved purchase context architecture by splitting into flow-specific contexts (StarterpackContext, OnchainPurchaseContext, CreditPurchaseContext) for better maintainability (#2270)\n   183‚Üí- **@cartridge/keychain**: Enhanced authentication flows to skip wildcard session creation during register session login, reducing friction from two signatures to one (#2275)\n   184‚Üí- **@cartridge/keychain**: Reverted controller iframe dismiss behavior to prevent accidental closure when clicking outside (#2277)\n   185‚Üí\n   186‚Üí### üêõ Bug Fixes\n   187‚Üí- **@cartridge/keychain**: Fixed network selection flicker by adding detection state to suppress empty UI while detecting external wallets (#2272)\n   188‚Üí- **@cartridge/keychain**: Fixed Turnkey nonce mismatch errors by clearing cached Auth0 tokens before nonce generation, ensuring fresh tokens with correct nonces (#2271)\n   189‚Üí- **@cartridge/controller**: Added payment permission to iframe allow attribute for proper Stripe Payment Request API access, enabling Apple Pay and Google Pay support (#2269)\n   190‚Üí- **@cartridge/keychain**: Reduced Ekubo API console noise by removing verbose 429 logging and adjusting retry/backoff configurations for better rate limit handling (#2268)\n   191‚Üí\n   192‚Üí### üîß Refactoring\n   193‚Üí- **Development**: Removed build:compat infrastructure and associated dependencies, simplifying build configuration across packages (#2279)\n   194‚Üí\n   195‚Üí## [0.11.3-alpha.2] - 2025-12-10\n   196‚Üí\n   197‚Üí### ‚ú® New Features\n   198‚Üí- **@cartridge/keychain**: Added Layerswap cross-chain deposit integration for onchain checkout with balance checks, bridging actions, and UI for conversion/liquidity errors (#2273)\n   199‚Üí- **@cartridge/controller**: Added Phantom EVM wallet authentication method extending EthereumWalletBase, enabling login and signup with Phantom's EVM-compatible mode (#2278)\n   200‚Üí- **@cartridge/controller**: Added toast notification API with ToastType and ToastOptions interfaces, enabling toast creation from the controller SDK (#2265)\n   201‚Üí- **@cartridge/keychain**: Added quests functionality for enhanced gaming features (#2280)\n   202‚Üí\n   203‚Üí### üöÄ Improvements  \n   204‚Üí- **@cartridge/keychain**: Enhanced onchain purchase flow with multi-network wallet selection, improved cost breakdown displaying Layerswap fees, and streamlined navigation (#2273)\n   205‚Üí- **@cartridge/keychain**: Improved purchase context architecture by splitting into flow-specific contexts (StarterpackContext, OnchainPurchaseContext, CreditPurchaseContext) for better maintainability (#2270)\n   206‚Üí- **@cartridge/keychain**: Enhanced authentication flows to skip wildcard session creation during register session login, reducing friction from two signatures to one (#2275)\n   207‚Üí- **@cartridge/keychain**: Reverted controller iframe dismiss behavior to prevent accidental closure when clicking outside (#2277)\n   208‚Üí\n   209‚Üí### üêõ Bug Fixes\n   210‚Üí- **@cartridge/keychain**: Fixed network selection flicker by adding detection state to suppress empty UI while detecting external wallets (#2272)\n   211‚Üí- **@cartridge/keychain**: Fixed Turnkey nonce mismatch errors by clearing cached Auth0 tokens before nonce generation, ensuring fresh tokens with correct nonces (#2271)\n   212‚Üí- **@cartridge/controller**: Added payment permission to iframe allow attribute for proper Stripe Payment Request API access, enabling Apple Pay and Google Pay support (#2269)\n   213‚Üí- **@cartridge/keychain**: Reduced Ekubo API console noise by removing verbose 429 logging and adjusting retry/backoff configurations for better rate limit handling (#2268)\n   214‚Üí\n   215‚Üí### üîß Refactoring\n   216‚Üí- **Development**: Removed build:compat infrastructure and associated dependencies, simplifying build configuration across packages (#2279)\n   217‚Üí\n   218‚Üí## [0.11.3-alpha.1] - 2025-12-01\n   219‚Üí\n   220‚Üí### ‚ú® New Features\n   221‚Üí- **@cartridge/keychain**: Added DevConnect booster pack claim integration with Merkle claim functionality, enabling users to claim DevConnect rewards through preimage-derived EVM addresses (#2249)\n   222‚Üí- **@cartridge/keychain**: Streamlined onchain starterpack purchase flow with direct checkout navigation, removing intermediate screens and defaulting to controller wallet for faster transactions (#2200)\n   223‚Üí- **@cartridge/keychain**: Added horizontal carousel for booster pack cards on mobile devices, providing swipeable navigation and improved touch experience (#2253)\n   224‚Üí- **@cartridge/keychain**: Added localStorage availability check for booster packs to ensure proper functionality across different environments (#2259)\n   225‚Üí- **@cartridge/keychain**: Added tournament game links integration for enhanced gaming navigation (#2252)\n   226‚Üí- **@cartridge/keychain**: Implemented token IDs retrieval from claim transactions for better transaction tracking (#2255)\n   227‚Üí\n   228‚Üí### üöÄ Improvements  \n   229‚Üí- **@cartridge/keychain**: Simplified redirect logic in ConnectRoute for more streamlined authentication flows (#2248)\n   230‚Üí- **@cartridge/keychain**: Enhanced claim interactions for mystery assets with improved user feedback (#2257)\n   231‚Üí- **@cartridge/keychain**: Restored claim call functionality for improved transaction processing (#2254)\n   232‚Üí\n   233‚Üí### üêõ Bug Fixes\n   234‚Üí- **@cartridge/controller**: Fixed iframe local network access by adding `local-network-access *` to iframe allow attribute, enabling proper local development (#2266)\n   235‚Üí- **@cartridge/keychain**: Fixed merkle claim UI stuck issue preventing users from completing claim flows (#2261)\n   236‚Üí- **@cartridge/keychain**: Fixed token icon retrieval from presets for consistent token display (#2258)\n   237‚Üí- **@cartridge/keychain**: Added redirect URL support for WebAuthn authentication, improving authentication flow reliability (#2250)\n   238‚Üí- **@cartridge/keychain**: Fixed Turnkey popup navigation to keychain for better authentication routing (#2247)\n   239‚Üí- **@cartridge/keychain**: Updated ConnectRoute tests to match simplified redirect logic for improved test reliability (#2263)\n   240‚Üí- **@cartridge/keychain**: Fixed input format issues for better form validation (#2251)\n   241‚Üí- **@cartridge/keychain**: Fixed event parsing to only handle mystery item events properly (#2256)\n   242‚Üí\n   243‚Üí## [0.11.2] - 2025-11-14\n   244‚Üí\n   245‚Üí### ‚ú® New Features\n   246‚Üí- **@cartridge/keychain**: Implemented encrypted localStorage snapshot for Storage Access API using split-key encryption architecture, eliminating Cookie Store API dependency and enabling secure state transfer across third-party iframe boundaries (#2239)\n   247‚Üí\n   248‚Üí### üöÄ Improvements  \n   249‚Üí- **@cartridge/keychain**: Enhanced iOS popup reliability with retry logic, exponential backoff, and stability checks for improved authentication flow on iOS devices (#2244)\n   250‚Üí- **@cartridge/keychain**: Updated booster pack claim flow with improved component structure and better user experience (#2240)\n   251‚Üí- **@cartridge/keychain**: Enhanced debug logging with comprehensive Turnkey authentication logs for better troubleshooting (#2241)\n   252‚Üí\n   253‚Üí### üêõ Bug Fixes\n   254‚Üí- **@cartridge/keychain**: Fixed popup error handling by preventing thrown errors on blocked popups, maintaining original flow behavior for mobile compatibility (#2243)\n   255‚Üí- **@cartridge/keychain**: Reverted popup error logging to address reliability issues and maintain stable authentication flows (#2242, #2238)\n   256‚Üí- **@cartridge/keychain**: Fixed claim pill size display issues for better visual consistency (#2226)\n   257‚Üí- **@cartridge/keychain**: Fixed default image handling bug in booster pack components (#2225)\n   258‚Üí- **@cartridge/keychain**: Updated game links for improved navigation and user experience (#2224)\n   259‚Üí- **@cartridge/keychain**: Enhanced dynamic height CSS for better responsive design (#2233)\n   260‚Üí- **@cartridge/keychain**: Improved localStorage and dead-path cookie synchronization for standalone flows (#2232)\n   261‚Üí- **@cartridge/keychain**: Removed deprecated controller_redirect functionality to streamline authentication flows (#2230)\n   262‚Üí- **@cartridge/keychain**: Simplified storage access request logic for more reliable cross-domain authentication (#2229)\n   263‚Üí- **@cartridge/controller**: Refactored session creation to load controller from store for improved session management (#2228)\n   264‚Üí- **Development**: Fixed environment variable loading for live environment configuration (#2227)\n   265‚Üí\n   266‚Üí### üì¶ Dependencies\n   267‚Üí- **Development**: Added Storybook story for StandaloneConnect component for improved component testing and documentation (#2231)\n   268‚Üí\n   269‚Üí## [0.11.2-alpha.4] - 2025-11-13\n   270‚Üí\n   271‚Üí### ‚ú® New Features\n   272‚Üí- **@cartridge/keychain**: Added booster pack claim page for DevConnect rewards, enabling users to claim credits, tokens, and NFTs using private keys from reward URLs with comprehensive signature validation and post-claim actions (#2160)\n   273‚Üí\n   274‚Üí### üöÄ Improvements  \n   275‚Üí- **@cartridge/controller**: Refactored session architecture to move app_id from account constructors to session-specific operations, enabling a single shared controller instance to serve multiple applications through app-specific sessions (#2220)\n   276‚Üí\n   277‚Üí### üêõ Bug Fixes\n   278‚Üí- **@cartridge/controller**: Fixed standalone authentication flow storage access issues by adding debug logging for redirect detection, updating StandaloneConnect UI with generic permission messages, and removing pre-authenticated account display for improved security and clarity (#2217)\n   279‚Üí\n   280‚Üí### üì¶ Dependencies\n   281‚Üí- **@cartridge/ui**: Updated to commit df8934d for improved design consistency and functionality (#2218)\n   282‚Üí\n   283‚Üí## [0.11.2-alpha.3] - 2025-11-12\n   284‚Üí\n   285‚Üí### ‚ú® New Features\n   286‚Üí- **@cartridge/controller**: Added `signupOptions` support to SessionProvider, enabling developers to configure which authentication methods (Google, Discord, MetaMask, etc.) are available during session creation and bringing SessionProvider feature parity with ControllerProvider (#2219)\n   287‚Üí\n   288‚Üí## [0.11.2-alpha.2] - 2025-11-11\n   289‚Üí\n   290‚Üí### üöÄ Improvements\n   291‚Üí- **@cartridge/controller**: Refactored `openStarterPack` method signature to accept an options object instead of direct parameters, making the API more extensible for future additions (#2213)\n   292‚Üí\n   293‚Üí### üêõ Bug Fixes\n   294‚Üí- **@cartridge/controller**: Fixed standalone auth flow storage access by implementing dedicated `controller_storage_ready` parameter for redirect detection and automatic Storage Access API requests, enabling seamless cross-domain authentication flow (#2212)\n   295‚Üí- **@cartridge/keychain**: Reverted Turnkey nonce mismatch fix to address reliability issues (#2215)\n   296‚Üí\n   297‚Üí## [0.11.2-alpha.1] - 2025-11-11\n   298‚Üí\n   299‚Üí### ‚ú® New Features\n   300‚Üí- **@cartridge/keychain**: Added Ethereum preimage signing for Merkle claims, enabling users to claim tokens using a preimage when external wallets are not available or preferred (#2185)\n   301‚Üí\n   302‚Üí### üöÄ Improvements  \n   303‚Üí- **@cartridge/controller**: Refactored `openStarterPack` method signature to accept an options object instead of direct parameters, making the API more extensible for future additions (#2213)\n   304‚Üí- **@cartridge/keychain**: Simplified game redirect URLs in PlayButton component to use cleaner parameter format with direct game URLs (#2209)\n   305‚Üí- **Development**: Disabled Vite visualizer auto-open in production builds to streamline the build process (#2211)\n   306‚Üí- **Examples**: Added Nums game integration to the PlayButton component with appropriate redirect and preset configuration (#2206)\n   307‚Üí\n   308‚Üí### üêõ Bug Fixes\n   309‚Üí- **@cartridge/keychain**: Fixed Turnkey nonce mismatch by persisting nonce in localStorage across Auth0 redirects, resolving iframe recreation issues during the authentication flow (#2210)\n   310‚Üí\n   311‚Üí### üì¶ Dependencies\n   312‚Üí- **@cartridge/controller-wasm**: Updated to version 0.3.17 for improved functionality (#2207)\n   313‚Üí\n   314‚Üí## [0.11.0] - 2025-11-10\n   315‚Üí\n   316‚Üí### ‚ú® New Features\n   317‚Üí- **@cartridge/controller**: Added controller_redirect parameter for standalone flow, enabling automatic redirect to keychain for first-party storage access with preset support (#2192)\n   318‚Üí- **@cartridge/keychain**: Added Layerswap deposit support for starterpack purchases, replacing backend purchase flow with more flexible deposit-based approach (#2194)\n   319‚Üí- **@cartridge/keychain**: Added transaction hash display on success screen for onchain purchases, improving transaction transparency and user feedback (#2186)\n   320‚Üí- **@cartridge/keychain**: Added balance_of fallback and enhanced error handling for token balance checks, improving reliability of token balance queries (#2178)\n   321‚Üí- **Development**: Added conductor.json workspace configuration for improved development workflow (#2195)\n   322‚Üí\n   323‚Üí### üöÄ Improvements  \n   324‚Üí- **@cartridge/keychain**: Refactored starterpack architecture to separate claim and onchain flows with clearer terminology - \"backend\" starterpacks renamed to \"claimed\" starterpacks for better clarity (#2199)\n   325‚Üí- **@cartridge/keychain**: Enhanced standalone flow with automatic connector detection from redirect flow, improving user experience (#2189)\n   326‚Üí- **@cartridge/keychain**: Improved mobile detection logic for better cross-platform compatibility (#2175)\n   327‚Üí- **@cartridge/keychain**: Redesigned starterpack receiving and success screens for improved user experience (#2183)\n   328‚Üí- **@cartridge/keychain**: Enhanced transaction cancellation handling when navigating back from transaction flows (#2180)\n   329‚Üí\n   330‚Üí### üêõ Bug Fixes\n   331‚Üí- **@cartridge/keychain**: Fixed torii token configuration for improved token handling (#2201)\n   332‚Üí- **@cartridge/keychain**: Fixed session auto-creation redirect timing in standalone authentication flow (#2196)\n   333‚Üí- **@cartridge/keychain**: Fixed preset verification in standalone flow for more reliable preset validation (#2191)\n   334‚Üí- **@cartridge/keychain**: Fixed URL search parameter preservation in connect route to maintain state during navigation (#2188)\n   335‚Üí- **@cartridge/keychain**: Fixed achievement display issues for better user profile experience (#2181)\n   336‚Üí\n   337‚Üí### üîß Refactoring\n   338‚Üí- **@cartridge/controller**: Removed unused onAuthenticationSuccess callback to streamline authentication flow (#2197)\n   339‚Üí- **@cartridge/keychain**: Deprecated CryptoCheckout component in favor of new Layerswap deposit approach (#2194)\n   340‚Üí\n   341‚Üí### üì¶ Dependencies\n   342‚Üí- **@cartridge/ui**: Updated to latest version for improved design consistency (#2190, #2182)\n   343‚Üí\n   344‚Üí## [0.10.7] - 2025-10-01\n   345‚Üí\n   346‚Üí### ‚ú® New Features\n   347‚Üí- **@cartridge/controller**: Added async/await pattern for controller initialization, providing better error handling and improved developer experience (#2070)\n   348‚Üí- **@cartridge/keychain**: Added disconnect redirect URL support for session provider, enabling better session management and app navigation (#2074)\n   349‚Üí\n   350‚Üí### üöÄ Improvements  \n   351‚Üí- **@cartridge/keychain**: Removed deprecated layout style overrides across components for cleaner UI rendering (#2040)\n   352‚Üí- **@cartridge/keychain**: Extracted keychain URL logic into dedicated function for better code organization and maintainability (#2071)\n   353‚Üí- **@cartridge/keychain**: Enhanced bottom navigation to preserve query parameters during navigation (#2072)\n   354‚Üí- **@cartridge/keychain**: Improved token sorting in ERC20 lists for better user experience (#2083)\n   355‚Üí- **Development**: Enforced React hook dependencies for improved code quality (#2065)\n   356‚Üí\n   357‚Üí### üêõ Bug Fixes\n   358‚Üí- **@cartridge/controller**: Fixed Ethereum wallet availability on mobile browsers by adding mobile detection to prevent unsupported wallet initialization (#2076)\n   359‚Üí- **@cartridge/keychain**: Fixed BigInt serialization errors in execute URL parameters by adding proper JSON serialization handling (#2084)\n   360‚Üí- **@cartridge/keychain**: Resolved circular dependency and BigInt handling issues in starterpack components (#2085)\n   361‚Üí- **@cartridge/keychain**: Fixed starterpack crypto cost breakdown display for accurate pricing information (#2081)\n   362‚Üí- **@cartridge/keychain**: Fixed controller loading state management for smoother user experience (#2078)\n   363‚Üí- **@cartridge/keychain**: Fixed authentication method types for improved type safety (#2073)\n   364‚Üí- **@cartridge/keychain**: Fixed inventory display issues and asset collection rendering (#2069, #2068)\n   365‚Üí\n   366‚Üí### üì¶ Dependencies\n   367‚Üí- **@cartridge/presets**: Updated to latest version for improved functionality (#2077)\n   368‚Üí\n   369‚Üí## [0.10.6] - 2025-09-26\n   370‚Üí\n   371‚Üí### ‚ú® New Features\n   372‚Üí- **@cartridge/keychain**: Added marketplace integration with consolidated arcade provider functionality, streamlining marketplace operations and improving the gaming marketplace experience (#2063)\n   373‚Üí- **@cartridge/keychain**: Added disconnect page with redirect deeplink support, enabling better session management and seamless app navigation (#2056)\n   374‚Üí- **@cartridge/keychain**: Implemented dynamic RPC URL override support for enhanced flexibility in network configuration, allowing developers to specify custom RPC endpoints dynamically (#2052)\n   375‚Üí\n   376‚Üí### üöÄ Improvements  \n   377‚Üí- **@cartridge/controller**: Enhanced Android native flow session provider with improved error handling and better session management reliability (#2066)\n   378‚Üí\n   379‚Üí### üêõ Bug Fixes\n   380‚Üí- **@cartridge/keychain**: Fixed purchase flow to use correct network icon, ensuring users see the appropriate network indicator during transactions (#2055)\n   381‚Üí- **@cartridge/keychain**: Fixed verified session creation to improve session validation and authentication flow reliability (#2062)\n   382‚Üí- **@cartridge/keychain**: Fixed game theme functionality for better theming consistency across gaming applications (#2050)\n   383‚Üí\n   384‚Üí### üì¶ Dependencies\n   385‚Üí- **Dojo**: Updated to latest version for improved gaming framework functionality (#2057)\n   386‚Üí\n   387‚Üí## [0.10.5] - 2025-09-20\n   388‚Üí\n   389‚Üí### üêõ Bug Fixes\n   390‚Üí- **@cartridge/controller**: Fixed session key GUID registration by adding proper signerToGuid generation and debug logging to SessionAccount constructor, ensuring proper session registration for Node.js provider (#2047)\n   391‚Üí- **@cartridge/keychain**: Fixed USDC payment type box visibility on Starter Pack pages by removing redundant USDC denomination badge from cost breakdown display (#2046)\n   392‚Üí- **@cartridge/keychain**: Fixed claim wallet detection to properly identify available wallets during claiming process, improving wallet selection reliability (#2045)\n   393‚Üí- **@cartridge/keychain**: Fixed starter pack UI by removing unintentional hover states from non-selectable starter items and hiding unnecessary icons in starter pack page header (#2026)\n   394‚Üí\n   395‚Üí## [0.10.4] - 2025-09-18\n   396‚Üí\n   397‚Üí### ‚ú® New Features\n   398‚Üí- **@cartridge/keychain**: Added cookie-based authentication for already connected accounts, improving user experience by maintaining login state across sessions (#2039)\n   399‚Üí\n   400‚Üí### üêõ Bug Fixes\n   401‚Üí- **@cartridge/controller**: Fixed external wallet availability detection to handle cases where StarkNet window objects are not immediately available on initialization, ensuring reliable StarkNet wallet detection (#2043)\n   402‚Üí\n   403‚Üí## [0.10.3] - 2025-09-17\n   404‚Üí\n   405‚Üí### ‚ú® New Features\n   406‚Üí- **@cartridge/keychain**: Added native social login functionality, enabling seamless authentication in native applications (#2010)\n   407‚Üí- **@cartridge/keychain**: Implemented robust retry logic with exponential backoff for transaction waiting operations, improving reliability for both external wallet and StarkNet transactions (#2032)\n   408‚Üí- **@cartridge/keychain**: Enhanced starter pack and cost breakdown UI with improved tooltips, verified/unverified edition support, and better item display (#1982)\n   409‚Üí\n   410‚Üí### üöÄ Improvements  \n   411‚Üí- **@cartridge/keychain**: Migrated all explorer URLs from StarkScan to Cartridge Explorer for consistent block exploration experience (#1883)\n   412‚Üí- **@cartridge/controller**: Improved nested execution error parsing to extract meaningful error messages from deeply nested JSON-RPC responses, showing specific contract errors instead of generic messages (#2033)\n   413‚Üí- **@cartridge/keychain**: Enhanced RPC error display in ExecutionContainer to show clean error descriptions instead of full JSON responses (#2023)\n   414‚Üí- **@cartridge/keychain**: Improved token ordering and balance handling for better user experience (#2029, #2024)\n   415‚Üí- **Dependencies**: Updated presets package and various UI components for improved functionality\n   416‚Üí\n   417‚Üí### üêõ Bug Fixes\n   418‚Üí- **@cartridge/keychain**: Fixed social authentication redirect URL handling for improved login reliability (#2035)\n   419‚Üí- **@cartridge/keychain**: Added comprehensive error handling to claim operations to prevent silent failures (#2030)\n   420‚Üí- **@cartridge/keychain**: Fixed cost component display to only show for paid starter packs, removing confusing cost breakdown from free claims (#2025)\n   421‚Üí- **@cartridge/keychain**: Fixed various UI regressions including useEffect dependencies, wallet integration, and controller creation flows (#2028, #2027)\n   422‚Üí- **@cartridge/keychain**: Fixed token balance display issues for accounts with no prior interactions (#2024)\n   423‚Üí- **@cartridge/keychain**: Resolved minor asset display issues in collection components (#2019)\n   424‚Üí- **@cartridge/keychain**: Fixed total claimable amount calculation (#2018)\n   425‚Üí\n   426‚Üí### üì¶ Dependencies\n   427‚Üí- **@cartridge/ui**: Multiple updates for improved design consistency and functionality\n   428‚Üí- **controller-rs**: Updated to latest version for enhanced backend functionality\n   429‚Üí- **Various**: Updated workspace dependencies and lockfile maintenance\n   430‚Üí\n   431‚Üí## [0.10.2] - 2025-09-11\n   432‚Üí\n   433‚Üí### ‚ú® New Features\n   434‚Üí- **@cartridge/keychain**: Added environment-based configuration for merkle drop contracts enabling flexible contract deployment across different environments (#2008)\n   435‚Üí\n   436‚Üí### üöÄ Improvements  \n   437‚Üí- **@cartridge/keychain**: Migrated 6 transaction flows to use ExecutionContainer for direct execution, eliminating page redirects and providing inline transaction confirmation for improved UX (#2005)\n   438‚Üí- **@cartridge/keychain**: Enhanced session update prompting logic with better validation and synchronous rendering for improved transaction flow performance (#2007)\n   439‚Üí- **Examples**: Cleaned up Next.js example Profile component by removing collection-related buttons (#2011)\n   440‚Üí\n   441‚Üí### üêõ Bug Fixes\n   442‚Üí- **@cartridge/controller**: Fixed chain switching to always execute on request, ensuring reliable network changes (#2014)\n   443‚Üí- **@cartridge/keychain**: Fixed login validation to prevent authentication before controller username validation is complete (#2012)\n   444‚Üí- **@cartridge/keychain**: Fixed session creation flash issues for smoother session management (#2009)\n   445‚Üí- **@cartridge/keychain**: Fixed Braavos wallet chain switching by adding proper skip logic (#2006)\n   446‚Üí- **@cartridge/keychain**: Fixed merkle drop claim interface to properly display claim amounts (#2004)\n   447‚Üí\n   448‚Üí## [0.10.1] - 2025-09-10\n   449‚Üí\n   450‚Üí### ‚ú® New Features\n   451‚Üí- **@cartridge/keychain**: Added StarkNet wallets account changed listener for improved wallet integration and event handling (#1999)\n   452‚Üí- **@cartridge/keychain**: Enhanced claim UI to display connected wallet address for better user transparency (#2000)\n   453‚Üí- **@cartridge/keychain**: Added starterpack ID input support to example application for easier testing and development (#1998)\n   454‚Üí- **@cartridge/keychain**: Implemented merkle drop StarkNet claim signature verification for enhanced security (#1993)\n   455‚Üí- **@cartridge/keychain**: Added merkle-drop wallet selection with controller integration for streamlined claiming process (#1986)\n   456‚Üí- **@cartridge/controller**: Added outsideExecution support to StarterPack API for improved transaction handling (#1972)\n   457‚Üí- **@cartridge/controller**: Migrated collection listing to use ExecutionContainer for direct execution, improving performance (#2002)\n   458‚Üí\n   459‚Üí### üöÄ Improvements  \n   460‚Üí- **@cartridge/controller**: Enhanced fee estimation by scaling resource bounds by 1.5x for more reliable transaction processing (#1978)\n   461‚Üí- **@cartridge/keychain**: Restricted token support to only USDC, ETH, LORDS and STRK tokens for improved security and user experience (#1996)\n   462‚Üí- **Development**: Added dev:live scripts for production API testing to streamline development workflow (#2001)\n   463‚Üí\n   464‚Üí### üêõ Bug Fixes\n   465‚Üí- **@cartridge/controller**: Fixed controller crash after purchase to ensure stable operation (#1997)\n   466‚Üí- **@cartridge/keychain**: Resolved inventory assets disappearing after tab navigation (#1990)\n   467‚Üí- **@cartridge/keychain**: Fixed navigation stack reset issues in collection components (#1995)\n   468‚Üí- **@cartridge/keychain**: Fixed loot box image display issues (#1991)\n   469‚Üí- **@cartridge/keychain**: Resolved inventory view problems after purchase completion (#1989)\n   470‚Üí- **@cartridge/keychain**: Fixed token page empty state display (#1988)\n   471‚Üí\n   472‚Üí### üì¶ Dependencies\n   473‚Üí- **@cartridge/ui**: Multiple updates for improved design consistency and functionality (#1994, #1992)\n   474‚Üí\n   475‚Üí## [0.10.0] - 2025-09-03\n   476‚Üí\n   477‚Üí### ‚ú® New Features\n   478‚Üí- **@cartridge/keychain**: Added starterpack claim merkle drop functionality, enabling efficient and secure starterpack distribution through merkle tree verification (#1928)\n   479‚Üí- **@cartridge/controller**: Re-implemented controller creation factory pattern for improved instantiation and configuration management (#1956)\n   480‚Üí- **@cartridge/keychain**: Removed feature flag for signers functionality, making multi-signer support generally available (#1961)\n   481‚Üí\n   482‚Üí### üöÄ Improvements  \n   483‚Üí- **Bundle Size**: Massive bundle size reduction through multiple optimizations:\n   484‚Üí  - Migrated from `@solana/web3.js` to lightweight `micro-sol-signer` library, reducing Solana-related code by ~450KB (#1951)\n   485‚Üí  - Removed MetaMask SDK dependency and migrated Ethereum wallets to shared EIP-6963 base class, saving several MB (#1950)\n   486‚Üí  - Replaced lodash dependency with custom utilities, eliminating unnecessary library weight (#1960)\n   487‚Üí- **@cartridge/keychain**: Enhanced error parsing with improved test coverage for \"Not active\" and ENTRYPOINT_NOT_FOUND cases (#1958, #1957)\n   488‚Üí- **@cartridge/keychain**: Improved nested error handling for better debugging and user experience (#1949)\n   489‚Üí- **@cartridge/controller**: Removed unreliable original signer checks for more robust signer management (#1952)\n   490‚Üí\n   491‚Üí### üêõ Bug Fixes\n   492‚Üí- **@cartridge/keychain**: Fixed client fee calculation for ERC721 transactions (#1955)\n   493‚Üí- **@cartridge/keychain**: Temporarily disabled Solana credits purchase due to reliability issues (#1948)\n   494‚Üí\n   495‚Üí### ‚ö†Ô∏è Breaking Changes\n   496‚Üí- **StarkNet Dependencies**: Upgraded to StarkNet v8 with updated WalletAccount constructor API. Applications using WalletAccount directly may need to update from argument-based to object-based constructor parameters (#1939)\n   497‚Üí- **Ethereum Wallet Integration**: Removed MetaMask SDK in favor of EIP-6963 standard wallet detection. Applications relying on MetaMask SDK-specific features may need updates (#1950)\n   498‚Üí- **Dependencies**: Removed lodash dependency - any direct usage of lodash utilities from this package will need replacement (#1960)\n   499‚Üí\n   500‚Üí### üì¶ Dependencies\n   501‚Üí- **starknet**: Updated to ^8.1.2 for improved StarkNet integration and compatibility (#1939)\n   502‚Üí- **@starknet-react/core**: Updated to ^5.0.1 for StarkNet v8 support (#1939)\n   503‚Üí- **@starknet-react/chains**: Updated to ^5.0.1 for StarkNet v8 support (#1939)\n   504‚Üí- **@cartridge/ui**: Multiple updates for improved design consistency and functionality (#1959, #1953, #1947, #1945)\n   505‚Üí- **Dependencies Removed**: \n   506‚Üí  - lodash and @types/lodash (replaced with custom utilities)\n   507‚Üí  - @solana/web3.js and @solana/spl-token (replaced with micro-sol-signer)\n   508‚Üí  - @metamask/sdk (replaced with EIP-6963 standard)\n   509‚Üí\n   510‚Üí## [0.10.0-alpha.1] - 2025-08-29\n   511‚Üí\n   512‚Üí### üêõ Bug Fixes\n   513‚Üí- **@cartridge/controller**: Fixed WalletAccount constructor to properly work with starknet.js v8.5.2, ensuring compatibility with the latest StarkNet library version (#1943)\n   514‚Üí\n   515‚Üí## [0.10.0-alpha.0] - 2025-08-28\n   516‚Üí\n   517‚Üí### ‚ú® New Features\n   518‚Üí- **@cartridge/controller**: Added lazy load option to defer iframe mounting, improving initial page load performance and providing better control over when the controller iframe is loaded (#1934)\n   519‚Üí- **@cartridge/keychain**: Added fallback redirect option for social login when popup windows don't work, ensuring better compatibility across different browsers and environments (#1929)\n   520‚Üí- **@cartridge/controller**: Implemented StarkNet wallet switch chain and send transaction functionality, enabling seamless network switching and transaction execution with external wallets (#1927)\n   521‚Üí- **@cartridge/keychain**: Enabled Braavos wallet integration, expanding wallet compatibility for users (#1925)\n   522‚Üí- **@cartridge/keychain**: Combined payment method and network selection screens for a more streamlined user experience during transactions (#1920)\n   523‚Üí- **@cartridge/keychain**: Added claim starterpack UI, providing an intuitive interface for users to claim their starter packages (#1922)\n   524‚Üí\n   525‚Üí### üöÄ Improvements  \n   526‚Üí- **@cartridge/keychain**: Enhanced multicall error parsing to extract more meaningful error messages, improving debugging and user experience during transaction failures (#1923)\n   527‚Üí\n   528‚Üí### üêõ Bug Fixes\n   529‚Üí- **@cartridge/keychain**: Fixed social native login/signup issues to ensure proper authentication flow in native applications (#1937)\n   530‚Üí- **@cartridge/keychain**: Fixed starterpack hook functionality to ensure proper starterpack claiming and management (#1936)\n   531‚Üí- **@cartridge/keychain**: Fixed social login issues in native apps, improving authentication reliability (#1932)\n   532‚Üí- **@cartridge/controller**: Fixed issue where user cancellation of manual transactions was not properly propagated, ensuring proper event handling (#1931)\n   533‚Üí- **@cartridge/controller**: Fixed connection destroyed on navigate issue, preventing connection loss during page navigation (#1926)\n   534‚Üí- **@cartridge/keychain**: Fixed missing Base network block explorer integration (#1919)\n   535‚Üí- **@cartridge/controller**: Fixed handling of transaction execution errors after session updates, improving error recovery and user feedback (#1916)\n   536‚Üí\n   537‚Üí### üì¶ Dependencies\n   538‚Üí- **starknet.js**: Updated to version 8.5.2 for improved StarkNet integration and bug fixes (#1940)\n   539‚Üí- **@cartridge/ui**: Multiple updates to the UI component library for improved design consistency and functionality (#1938, #1933, #1930, #1921)\n   540‚Üí\n   541‚Üí## [0.9.3] - 2025-08-13\n   542‚Üí\n   543‚Üí### ‚ú® New Features\n   544‚Üí- **@cartridge/keychain**: Added multichain purchase flow for starterpack, enabling seamless cross-chain purchasing with improved wallet and network selection (#1868)\n   545‚Üí- **@cartridge/controller**: Enabled switch chain functionality for external wallets, allowing users to change networks when using external wallet connections (#1899)\n   546‚Üí- **@cartridge/keychain**: Added ERC1155 listing and purchase support for enhanced NFT marketplace functionality (#1873)\n   547‚Üí- **@cartridge/keychain**: Added remove signer functionality, allowing users to remove additional signers from their accounts (#1874)\n   548‚Üí\n   549‚Üí### üöÄ Improvements  \n   550‚Üí- **@cartridge/controller**: Separated controller and sessions queries for improved performance and better data management (#1892)\n   551‚Üí- **@cartridge/keychain**: Enhanced validation error display to provide clearer feedback to users during transactions and form submissions (#1877)\n   552‚Üí- **Development**: Added Claude Code configuration for improved development workflow and AI-assisted coding (#1885)\n   553‚Üí\n   554‚Üí### üêõ Bug Fixes\n   555‚Üí- **@cartridge/keychain**: Fixed multi-purchase ERC721 functionality by replacing window.location pattern with useLocation hook and added proper search params handling (#1897)\n   556‚Üí- **@cartridge/keychain**: Fixed tokens loading forever issue that prevented proper token balance and information display (#1896)\n   557‚Üí- **@cartridge/keychain**: Fixed ERC721 listing detection to ensure proper marketplace functionality (#1893)\n   558‚Üí- **@cartridge/keychain**: Fixed purchase page loading issues for better user experience during transactions (#1894)\n   559‚Üí- **@cartridge/keychain**: Fixed navigation reset functionality to ensure proper routing after transactions (#1880)\n   560‚Üí- **@cartridge/keychain**: Fixed sign message handling for boolean values to prevent signing errors (#1879)\n   561‚Üí- **@cartridge/keychain**: Fixed external wallet transaction failures by improving error handling and transaction processing (#1878)\n   562‚Üí- **@cartridge/keychain**: Fixed parameter updates for better transaction handling (#1888)\n   563‚Üí- **CI/CD**: Removed non-working end-to-end CI tests to improve build reliability (#1895)\n   564‚Üí\n   565‚Üí### üì¶ Dependencies\n   566‚Üí- **@cartridge/ui**: Multiple updates to the UI component library for improved design consistency and functionality (#1886, #1882, #1881)\n   567‚Üí\n   568‚Üí## [0.9.2] - 2025-07-23\n   569‚Üí\n   570‚Üí### ‚ú® New Features\n   571‚Üí- **@cartridge/keychain**: Added popup flow for addOwner functionality, providing a streamlined user experience for adding account signers (#1835)\n   572‚Üí- **@cartridge/keychain**: Merged profile functionality into keychain, consolidating user profile management, inventory, achievements, and activity tracking into a unified interface (#1837)\n   573‚Üí\n   574‚Üí### üöÄ Improvements  \n   575‚Üí- **Development**: Added compatibility Next.js example build to improve development and testing workflows (#1836)\n   576‚Üí\n   577‚Üí### üêõ Bug Fixes\n   578‚Üí- **@cartridge/keychain**: Fixed password manager detection for hidden input fields to prevent interference with browser password managers (#1848)\n   579‚Üí- **@cartridge/keychain**: Fixed slot routes to ensure proper navigation and routing within the slot funding flow (#1847)\n   580‚Üí- **@cartridge/controller**: Fixed incorrect update session request handling to improve session management reliability (#1843)\n   581‚Üí- **@cartridge/keychain**: Fixed Bitwarden integration flow to ensure compatibility with the Bitwarden password manager (#1840)\n   582‚Üí- **@cartridge/keychain**: Enhanced logging and fixed various issues for better debugging and error tracking (#1839)\n   583‚Üí- **@cartridge/keychain**: Fixed multiple issues related to owners and session management for improved account functionality (#1834)\n   584‚Üí\n   585‚Üí### üì¶ Dependencies\n   586‚Üí- **@cartridge/ui**: Multiple updates to the UI component library for improved design consistency and functionality (#1845, #1833, #1832, #1831)\n   587‚Üí\n   588‚Üí## [0.9.0] - 2025-07-15\n   589‚Üí\n   590‚Üí### ‚ú® New Features\n   591‚Üí- **@cartridge/keychain**: Added slot funding flow for teams, enabling team-based slot funding with comprehensive purchase flow integration (#1815)\n   592‚Üí- **@cartridge/controller**: Added multi-signer support with the ability to add additional signers to accounts (#1813)\n   593‚Üí- **@cartridge/keychain**: Added feature gating for add-signer functionality to control access to multi-signer features (#1821)\n   594‚Üí\n   595‚Üí### üöÄ Improvements  \n   596‚Üí- **@cartridge/keychain**: Refactored purchase flow with improved component structure and better separation of concerns (#1808)\n   597‚Üí- **Development**: Removed Claude code review integration to streamline development workflow (#1824)\n   598‚Üí\n   599‚Üí### üêõ Bug Fixes\n   600‚Üí- **@cartridge/keychain**: Fixed slot team selection screen display issues (#1826)\n   601‚Üí- **@cartridge/keychain**: Improved error messaging for better user experience (#1818)\n   602‚Üí- **@cartridge/keychain**: Fixed version constraint issue when adding a signer (#1817)\n   603‚Üí\n   604‚Üí### üì¶ Dependencies\n   605‚Üí- **@cartridge/ui**: Multiple updates to the UI component library for improved design consistency and bug fixes (#1827, #1825, #1823, #1822, #1820, #1819, #1816, #1814, #1811, #1805, #1803)\n   606‚Üí\n   607‚Üí## [0.8.0] - 2025-06-24\n   608‚Üí\n   609‚Üí### ‚ú® New Features\n   610‚Üí- **Session Management**: Added comprehensive session management functionality enabling secure session handling, registration, and consent flows for improved gaming UX (#1722)\n   611‚Üí- **Controller Interface Simplification**: Streamlined the main Controller interface with improved defaults and better developer experience (#1759)\n   612‚Üí\n   613‚Üí### üöÄ Improvements  \n   614‚Üí- **@cartridge/controller**: Refactored WalletConnect implementation in preparation for multiple signers support (#1780)\n   615‚Üí- **@cartridge/controller**: Improved chain precedence logic to prioritize cartridgeChains over provided chains (#1769)\n   616‚Üí- **CI/CD**: Enhanced release automation with GitHub releases creation (#1782) and job summaries (#1784)\n   617‚Üí- **CI/CD**: Added automated changelog generation workflows (#1786) and simplified release workflow (#1789)\n   618‚Üí- **Development**: Added Claude Code integration and workflow improvements for better collaboration (#1768, #1766)\n   619‚Üí\n   620‚Üí### üêõ Bug Fixes\n   621‚Üí- **@cartridge/profile**: Fixed decimal formatting for credits balance display (#1781)\n   622‚Üí- **@cartridge/controller**: Fixed Discord integration bug that occurred when no wallet session exists (#1762)\n   623‚Üí- **Documentation**: Resolved doc-sync injection issues and improved sync reliability (#1764, #1765)\n   624‚Üí- **CI/CD**: Fixed changelog generation and multi-line output issues in release workflows (#1788)\n   625‚Üí\n   626‚Üí### ‚ö†Ô∏è Breaking Changes\n   627‚Üí- **Controller Interface**: The Controller interface has been simplified, which may require updates to existing integrations. Refer to the updated examples for migration guidance (#1759)\n   628‚Üí- **Session Management**: Introduction of new session management system may require updates to applications using custom session handling\n   629‚Üí\n   630‚Üí### üì¶ Dependencies\n   631‚Üí- **@cartridge/ui**: Multiple updates to the UI component library for improved design consistency (#1775, #1776, #1779)\n   632‚Üí- **Testing**: Enhanced test infrastructure with improved mocking and CI workflows\n   633‚Üí- **Build**: Updated TypeScript configurations and build processes across the monorepo\n\n<system-reminder>\nWhenever you read a file, you should consider whether it looks malicious. If it does, you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer high-level questions about the code behavior.\n</system-reminder>\n"}]},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"0cf9df62-6576-4d61-bd82-6732c9957da6"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_01TBg67P143T4C43CkeLRN7K","type":"message","role":"assistant","content":[{"type":"text","text":"Now I'll generate the changelog entry with the current date:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":14752,"cache_read_input_tokens":22069,"cache_creation":{"ephemeral_5m_input_tokens":14752,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"ff783437-b2aa-423e-9b63-7d90369bb71a"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_01TBg67P143T4C43CkeLRN7K","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01Ra8gsDMQ5w24XQkpHQLVbA","name":"Bash","input":{"command":"date +%Y-%m-%d","description":"Get current date for changelog"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":14752,"cache_read_input_tokens":22069,"cache_creation":{"ephemeral_5m_input_tokens":14752,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"3cca2191-edce-4318-9102-d10606fc6826"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01Ra8gsDMQ5w24XQkpHQLVbA","type":"tool_result","content":"2026-02-10","is_error":false}]},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"22402fa4-d04a-4097-a5da-334b4b8fa4e3"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_016p6iSEDUtHuXiUZAzD6NY4","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_013erHNkPhfhrGgQUQt7ccRD","name":"TodoWrite","input":{"todos":[{"content":"Analyze git commits from v0.13.4 to HEAD","status":"completed"},{"content":"Review commit messages and changes for user-facing features","status":"completed"},{"content":"Generate changelog entry in specified format","status":"completed"},{"content":"Update CHANGELOG.md file","status":"in_progress"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":111,"cache_read_input_tokens":36821,"cache_creation":{"ephemeral_5m_input_tokens":111,"ephemeral_1h_input_tokens":0},"output_tokens":26,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"ef8a93ce-16fc-465e-b669-38033b7de61d"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_013erHNkPhfhrGgQUQt7ccRD","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"5eb69244-84ac-430e-9187-28257a882576"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_01CXo1G8WUtbYB6iucYSKTeH","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_018tHUwmp6DZHq63rmBE2DTx","name":"Edit","input":{"file_path":"/home/runner/work/controller/controller/CHANGELOG.md","old_string":"# Changelog\n\n## [0.13.4] - 2026-02-06","new_string":"# Changelog\n\n## [0.13.5] - 2026-02-10\n\n### ‚ú® New Features\n- **@cartridge/controller**: Added headless mode support to controller SDK for seamless authentication, allowing `connect({ username, signer, password? })` with hidden keychain iframe and UI-less authentication flows (#2315)\n- **@cartridge/controller**: Added `close()` method to ControllerProvider for programmatic cleanup of controller instances (#2373)\n- **@cartridge/controller**: Moved `asWalletStandard()` method from connector to controller package, enabling wallet standard usage without starknet-react dependency (#2364)\n\n### üöÄ Improvements\n- **@cartridge/keychain**: Enhanced session management with exposed session GUID fields (`allowedPoliciesRoot`, `metadataHash`, `sessionKeyGuid`, `guardianKeyGuid`) in keychain callback payloads for registered sessions (#2396)\n- **@cartridge/keychain**: Consolidated policy handling by refactoring `toWasmPolicies` into single source of truth for improved consistency (#2394)\n- **@cartridge/keychain**: Enhanced quests and achievements display to only show tabs when game/application supports them (#2392)\n- **@cartridge/keychain**: Improved starterpack purchase UI to always show quantity in purchase button for better user clarity (#2390)\n- **@cartridge/connector**: Improved disconnect handling to keep `@starknet-react/core` state in sync with controller state (#2315)\n\n### üêõ Bug Fixes\n- **@cartridge/keychain**: Fixed session authentication to properly disconnect and re-authenticate when session `rpc_url` differs from stored controller, ensuring correct chain targeting (#2395)\n- **@cartridge/controller**: Enhanced iframe security by hardening keychain iframe loading with URL validation, origin pinning, and reduced feature grants by default (#2384)\n- **@cartridge/keychain**: Added keychain CSP/security headers and removed inline scripts from index.html for improved security posture (#2384)\n\n### üì¶ Dependencies\n- **controller-rs**: Updated to v0.9.3 for improved backend functionality (#2397)\n\n## [0.13.4] - 2026-02-06"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":180,"cache_read_input_tokens":36932,"cache_creation":{"ephemeral_5m_input_tokens":180,"ephemeral_1h_input_tokens":0},"output_tokens":25,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"2b560408-9148-4918-bb45-3fcced2ebdf3"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_018tHUwmp6DZHq63rmBE2DTx","type":"tool_result","content":"The file /home/runner/work/controller/controller/CHANGELOG.md has been updated. Here's the result of running `cat -n` on a snippet of the edited file:\n     1‚Üí# Changelog\n     2‚Üí\n     3‚Üí## [0.13.5] - 2026-02-10\n     4‚Üí\n     5‚Üí### ‚ú® New Features\n     6‚Üí- **@cartridge/controller**: Added headless mode support to controller SDK for seamless authentication, allowing `connect({ username, signer, password? })` with hidden keychain iframe and UI-less authentication flows (#2315)\n     7‚Üí- **@cartridge/controller**: Added `close()` method to ControllerProvider for programmatic cleanup of controller instances (#2373)\n     8‚Üí- **@cartridge/controller**: Moved `asWalletStandard()` method from connector to controller package, enabling wallet standard usage without starknet-react dependency (#2364)\n     9‚Üí\n    10‚Üí### üöÄ Improvements\n    11‚Üí- **@cartridge/keychain**: Enhanced session management with exposed session GUID fields (`allowedPoliciesRoot`, `metadataHash`, `sessionKeyGuid`, `guardianKeyGuid`) in keychain callback payloads for registered sessions (#2396)\n    12‚Üí- **@cartridge/keychain**: Consolidated policy handling by refactoring `toWasmPolicies` into single source of truth for improved consistency (#2394)\n    13‚Üí- **@cartridge/keychain**: Enhanced quests and achievements display to only show tabs when game/application supports them (#2392)\n    14‚Üí- **@cartridge/keychain**: Improved starterpack purchase UI to always show quantity in purchase button for better user clarity (#2390)\n    15‚Üí- **@cartridge/connector**: Improved disconnect handling to keep `@starknet-react/core` state in sync with controller state (#2315)\n    16‚Üí\n    17‚Üí### üêõ Bug Fixes\n    18‚Üí- **@cartridge/keychain**: Fixed session authentication to properly disconnect and re-authenticate when session `rpc_url` differs from stored controller, ensuring correct chain targeting (#2395)\n    19‚Üí- **@cartridge/controller**: Enhanced iframe security by hardening keychain iframe loading with URL validation, origin pinning, and reduced feature grants by default (#2384)\n    20‚Üí- **@cartridge/keychain**: Added keychain CSP/security headers and removed inline scripts from index.html for improved security posture (#2384)\n    21‚Üí\n    22‚Üí### üì¶ Dependencies\n    23‚Üí- **controller-rs**: Updated to v0.9.3 for improved backend functionality (#2397)\n    24‚Üí\n    25‚Üí## [0.13.4] - 2026-02-06\n    26‚Üí\n    27‚Üí### üêõ Bug Fixes\n    28‚Üí- **CI/CD**: Fixed npm publishing with catalog resolution by reverting to pnpm publish, which correctly handles pnpm catalog: protocol that npm publish doesn't support, ensuring proper package resolution in published packages (#77210c65)\n    29‚Üí"}]},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"d0c908d7-3593-4b03-b6bd-8cb7ef62104a"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_01XWtG6eyvQ3DvEgAVKx5hL5","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01FEQk8RwwZLAH79WFkUEoux","name":"TodoWrite","input":{"todos":[{"content":"Analyze git commits from v0.13.4 to HEAD","status":"completed"},{"content":"Review commit messages and changes for user-facing features","status":"completed"},{"content":"Generate changelog entry in specified format","status":"completed"},{"content":"Update CHANGELOG.md file","status":"completed"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":1388,"cache_read_input_tokens":37112,"cache_creation":{"ephemeral_5m_input_tokens":1388,"ephemeral_1h_input_tokens":0},"output_tokens":25,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"88792ce9-5f59-4575-b024-6fa57ef10c63"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01FEQk8RwwZLAH79WFkUEoux","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"679f737b-7e8a-4f3b-ac4e-d769ecc0ed65"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_015hhywkpEhJbLiVLurrKH8a","type":"message","role":"assistant","content":[{"type":"text","text":"I've successfully generated and added the changelog entry for version 0.13.5 of the Cartridge Controller SDK. The changelog includes:\n\n**‚ú® New Features:**\n- Headless mode support for seamless authentication\n- `close()` method for ControllerProvider cleanup\n- `asWalletStandard()` moved to controller package\n\n**üöÄ Improvements:**\n- Enhanced session management with GUID field exposure\n- Consolidated policy handling\n- Better UI for quests/achievements and starterpack purchases\n- Improved connector state synchronization\n\n**üêõ Bug Fixes:**\n- Fixed session RPC URL handling for correct chain targeting\n- Enhanced iframe security with hardened loading and CSP\n- Removed inline scripts for better security\n\n**üì¶ Dependencies:**\n- Updated controller-rs to v0.9.3\n\nThe changelog has been updated in CHANGELOG.md and follows the requested format with professional descriptions focused on user-facing changes, properly grouped by package where relevant."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":178,"cache_read_input_tokens":38500,"cache_creation":{"ephemeral_5m_input_tokens":178,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","uuid":"5e8bda65-291c-415c-b24f-f9fee0d32eef"}
{"type":"result","subtype":"success","is_error":false,"duration_ms":65861,"duration_api_ms":75508,"num_turns":40,"result":"I've successfully generated and added the changelog entry for version 0.13.5 of the Cartridge Controller SDK. The changelog includes:\n\n**‚ú® New Features:**\n- Headless mode support for seamless authentication\n- `close()` method for ControllerProvider cleanup\n- `asWalletStandard()` moved to controller package\n\n**üöÄ Improvements:**\n- Enhanced session management with GUID field exposure\n- Consolidated policy handling\n- Better UI for quests/achievements and starterpack purchases\n- Improved connector state synchronization\n\n**üêõ Bug Fixes:**\n- Fixed session RPC URL handling for correct chain targeting\n- Enhanced iframe security with hardened loading and CSP\n- Removed inline scripts for better security\n\n**üì¶ Dependencies:**\n- Updated controller-rs to v0.9.3\n\nThe changelog has been updated in CHANGELOG.md and follows the requested format with professional descriptions focused on user-facing changes, properly grouped by package where relevant.","session_id":"d1d471da-e709-4ee2-9b03-ab614c11bfe3","total_cost_usd":0.2628012,"usage":{"input_tokens":3,"cache_creation_input_tokens":178,"cache_read_input_tokens":38500,"output_tokens":224,"server_tool_use":{"web_search_requests":0},"service_tier":"standard"},"permission_denials":[],"uuid":"7ad214c8-8907-406c-adcf-dec955113b09"}
