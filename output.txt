{"type":"system","subtype":"init","cwd":"/home/runner/work/controller/controller","session_id":"f84e5493-bff7-4e82-9de4-d5b1c556b418","tools":["Task","Bash","Glob","Grep","LS","ExitPlanMode","Read","Edit","MultiEdit","Write","NotebookEdit","TodoWrite","BashOutput","KillBash"],"mcp_servers":[],"model":"claude-sonnet-4-20250514","permissionMode":"default","slash_commands":["commit","pr","add-dir","agents","clear","compact","config","context","cost","doctor","exit","help","ide","init","install-github-app","mcp","memory","migrate-installer","model","output-style","output-style:new","pr-comments","release-notes","resume","status","statusline","bug","review","security-review","upgrade","vim","permissions","hooks","export","logout","login","bashes"],"apiKeySource":"ANTHROPIC_API_KEY","output_style":"default","uuid":"fa4b1b07-3538-46d8-8cf3-e32d738bc814"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_0196r7VsZveW4VrsTkg7nHvX","type":"message","role":"assistant","content":[{"type":"text","text":"I'll analyze the git commit history from v0.12.2 to HEAD and generate a changelog entry for version 0.13.3."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":2,"cache_creation_input_tokens":5631,"cache_read_input_tokens":10412,"cache_creation":{"ephemeral_5m_input_tokens":5631,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"f84e5493-bff7-4e82-9de4-d5b1c556b418","uuid":"1c2b299e-76c3-4b1e-a71c-4cd218252c65"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_0196r7VsZveW4VrsTkg7nHvX","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01RxeKVds4wytFsFsAg1r3eQ","name":"TodoWrite","input":{"todos":[{"content":"Analyze git commit history from v0.12.2 to HEAD","status":"pending"},{"content":"Examine commit messages and changes for user-facing updates","status":"pending"},{"content":"Read existing CHANGELOG.md to understand format","status":"pending"},{"content":"Generate changelog entry for version 0.13.3","status":"pending"},{"content":"Update CHANGELOG.md with new entry","status":"pending"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":2,"cache_creation_input_tokens":5631,"cache_read_input_tokens":10412,"cache_creation":{"ephemeral_5m_input_tokens":5631,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"f84e5493-bff7-4e82-9de4-d5b1c556b418","uuid":"009f68b8-7140-4799-b82b-ea5660aa1a01"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01RxeKVds4wytFsFsAg1r3eQ","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"parent_tool_use_id":null,"session_id":"f84e5493-bff7-4e82-9de4-d5b1c556b418","uuid":"51e98df0-af25-4aa9-9d26-18b174c7c1be"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_01ThhawmGzumZKi7pqTWaaFE","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01AydBc9xr1KurX112855PLh","name":"TodoWrite","input":{"todos":[{"content":"Analyze git commit history from v0.12.2 to HEAD","status":"in_progress"},{"content":"Examine commit messages and changes for user-facing updates","status":"pending"},{"content":"Read existing CHANGELOG.md to understand format","status":"pending"},{"content":"Generate changelog entry for version 0.13.3","status":"pending"},{"content":"Update CHANGELOG.md with new entry","status":"pending"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":5,"cache_creation_input_tokens":237,"cache_read_input_tokens":16043,"cache_creation":{"ephemeral_5m_input_tokens":237,"ephemeral_1h_input_tokens":0},"output_tokens":24,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"f84e5493-bff7-4e82-9de4-d5b1c556b418","uuid":"c15c9d55-8d37-47fb-a718-50c51d2f29f8"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01AydBc9xr1KurX112855PLh","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"parent_tool_use_id":null,"session_id":"f84e5493-bff7-4e82-9de4-d5b1c556b418","uuid":"306b4543-9aee-4509-8cbb-f9dcb2f59b41"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_01HHhghv7sZqagGAuwJXK2Pe","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01RVZiEWWMhbg57Wwg2AZeGD","name":"Bash","input":{"command":"git log v0.12.2..HEAD --oneline","description":"Get commit history from v0.12.2 to HEAD"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":5,"cache_creation_input_tokens":210,"cache_read_input_tokens":16280,"cache_creation":{"ephemeral_5m_input_tokens":210,"ephemeral_1h_input_tokens":0},"output_tokens":26,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"f84e5493-bff7-4e82-9de4-d5b1c556b418","uuid":"c0dd520a-7e73-4fbb-8d93-6b006ebac0b9"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_01HHhghv7sZqagGAuwJXK2Pe","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01YVnu8WAx2Sqf8D8cf6CeK5","name":"Bash","input":{"command":"git log v0.12.2..HEAD --pretty=format:\"%h %s\" --no-merges","description":"Get detailed commit messages without merge commits"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":5,"cache_creation_input_tokens":210,"cache_read_input_tokens":16280,"cache_creation":{"ephemeral_5m_input_tokens":210,"ephemeral_1h_input_tokens":0},"output_tokens":26,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"f84e5493-bff7-4e82-9de4-d5b1c556b418","uuid":"552ef8a2-2d0c-4b18-b66f-2e25b514d150"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01RVZiEWWMhbg57Wwg2AZeGD","type":"tool_result","content":"4b296cf6 fix: install npm 11.5.0+ for OIDC trusted publishing\n853bf593 fix(keychain): align password login button with primary theme (#2385)\nd025cc3c Prepare release: 0.13.2 (#2386)\nc9c6f25d fix: add repository field to package.json for npm OIDC\n2c818047 Prepare release: 0.13.1 (#2383)\n3880e8ba fix: use npm publish for OIDC support\n67ba7eb9 Prepare release: 0.13.0 (#2382)\n0b3729b9 fix: add agent mode to claude-code-action for workflow_dispatch\nc79e6ce2 feat: migrate npm publish to OIDC authentication (#2381)\n2c879ec4 fix: inline changelog generation into release-dispatch (#2379)\n0c7e6a7a Prepare release: 0.12.3 (#2378)\n85cf71a9 feat(keychain): tighten capacitor origin verification (#2375)\n9708f87a Request storage access in iframe connect flow (#2374)\n0044542e feat: emit specialized controller toasts (#2358)\n9d0280ca fix: aggregate contracts on unverified session (#2304)\n9850cc9b Add ApprovalPolicy support to controller toWasmPolicies (#2372)\nb6de9c7c fix: set coinbase sandbox correctly (#2371)\n763e7a04 fix: enhance preset verification for Capacitor (#2369)\n4489a92d Add starterpack play callback (#2362)\nffdac0c6 Ensure canonical sorting of policies before hashing (#2359)\n8ac2235e fix: reuse existing controller to prevent re-initialization issues (#2360)\n0e715765 fix: support non-Cartridge chainId lookup (#2361)\nf29bf3cd Prepare release: 0.12.2 (#2356)","is_error":false}]},"parent_tool_use_id":null,"session_id":"f84e5493-bff7-4e82-9de4-d5b1c556b418","uuid":"ac205b9d-7a5a-45b4-84b1-701238341f3c"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01YVnu8WAx2Sqf8D8cf6CeK5","type":"tool_result","content":"4b296cf6 fix: install npm 11.5.0+ for OIDC trusted publishing\n853bf593 fix(keychain): align password login button with primary theme (#2385)\nd025cc3c Prepare release: 0.13.2 (#2386)\nc9c6f25d fix: add repository field to package.json for npm OIDC\n2c818047 Prepare release: 0.13.1 (#2383)\n3880e8ba fix: use npm publish for OIDC support\n67ba7eb9 Prepare release: 0.13.0 (#2382)\n0b3729b9 fix: add agent mode to claude-code-action for workflow_dispatch\nc79e6ce2 feat: migrate npm publish to OIDC authentication (#2381)\n2c879ec4 fix: inline changelog generation into release-dispatch (#2379)\n0c7e6a7a Prepare release: 0.12.3 (#2378)\n85cf71a9 feat(keychain): tighten capacitor origin verification (#2375)\n9708f87a Request storage access in iframe connect flow (#2374)\n0044542e feat: emit specialized controller toasts (#2358)\n9d0280ca fix: aggregate contracts on unverified session (#2304)\n9850cc9b Add ApprovalPolicy support to controller toWasmPolicies (#2372)\nb6de9c7c fix: set coinbase sandbox correctly (#2371)\n763e7a04 fix: enhance preset verification for Capacitor (#2369)\n4489a92d Add starterpack play callback (#2362)\nffdac0c6 Ensure canonical sorting of policies before hashing (#2359)\n8ac2235e fix: reuse existing controller to prevent re-initialization issues (#2360)\n0e715765 fix: support non-Cartridge chainId lookup (#2361)\nf29bf3cd Prepare release: 0.12.2 (#2356)","is_error":false}]},"parent_tool_use_id":null,"session_id":"f84e5493-bff7-4e82-9de4-d5b1c556b418","uuid":"37b5d239-7446-4abf-93aa-08d32b3576a2"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_01VGYTw3NRBJt4FHE5j2Z48H","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01KVnBWkPx3w5ARGn77itJ6f","name":"TodoWrite","input":{"todos":[{"content":"Analyze git commit history from v0.12.2 to HEAD","status":"completed"},{"content":"Examine commit messages and changes for user-facing updates","status":"in_progress"},{"content":"Read existing CHANGELOG.md to understand format","status":"pending"},{"content":"Generate changelog entry for version 0.13.3","status":"pending"},{"content":"Update CHANGELOG.md with new entry","status":"pending"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":6,"cache_creation_input_tokens":1191,"cache_read_input_tokens":16490,"cache_creation":{"ephemeral_5m_input_tokens":1191,"ephemeral_1h_input_tokens":0},"output_tokens":24,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"f84e5493-bff7-4e82-9de4-d5b1c556b418","uuid":"6b4e3832-9dc1-42df-80d8-83546caba6a8"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01KVnBWkPx3w5ARGn77itJ6f","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"parent_tool_use_id":null,"session_id":"f84e5493-bff7-4e82-9de4-d5b1c556b418","uuid":"684e2550-019d-4cc8-95b6-d7480aae9c5a"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_01YGY6iBo6KB2BgqQKJSVLkw","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_013284DvfwwfxiFkLr51Khwm","name":"Read","input":{"file_path":"/home/runner/work/controller/controller/CHANGELOG.md"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":5,"cache_creation_input_tokens":211,"cache_read_input_tokens":17681,"cache_creation":{"ephemeral_5m_input_tokens":211,"ephemeral_1h_input_tokens":0},"output_tokens":18,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"f84e5493-bff7-4e82-9de4-d5b1c556b418","uuid":"4cfc38a2-c1b7-446f-b06b-8da0a05d551f"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_01YGY6iBo6KB2BgqQKJSVLkw","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_017jejhMhg2KaVTzFBYsd4d3","name":"Bash","input":{"command":"git show --name-only 85cf71a9 9708f87a 0044542e 9d0280ca 9850cc9b b6de9c7c 763e7a04 4489a92d ffdac0c6 8ac2235e 0e715765","description":"Show file changes for key user-facing commits"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":5,"cache_creation_input_tokens":211,"cache_read_input_tokens":17681,"cache_creation":{"ephemeral_5m_input_tokens":211,"ephemeral_1h_input_tokens":0},"output_tokens":18,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"f84e5493-bff7-4e82-9de4-d5b1c556b418","uuid":"f144d7d3-9928-4b2b-94fe-e3a1cc449f2a"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_013284DvfwwfxiFkLr51Khwm","type":"tool_result","content":"     1â†’# Changelog\n     2â†’\n     3â†’## [0.13.2] - 2026-02-06\n     4â†’\n     5â†’### ğŸ› Bug Fixes\n     6â†’- **@cartridge/controller, @cartridge/connector**: Added repository field to package.json files for npm OIDC trusted publishing, ensuring proper package verification and supply chain security (#c9c6f25d)\n     7â†’\n     8â†’## [0.13.1] - 2026-02-06\n     9â†’\n    10â†’### ğŸ› Bug Fixes\n    11â†’- **CI/CD**: Fixed npm publishing with OIDC authentication by switching from pnpm publish to npm publish and removing registry-url from setup-node to prevent .npmrc conflicts that block OIDC token exchange (#3880e8ba)\n    12â†’\n    13â†’## [0.13.0] - 2026-02-06\n    14â†’\n    15â†’### âœ¨ New Features\n    16â†’- **@cartridge/controller**: Added ApprovalPolicy support to controller toWasmPolicies for enhanced policy management and proper merkle root calculation across different connectors (#2372)\n    17â†’- **@cartridge/controller**: Added starterpack play callback functionality enabling custom game launch behavior and improved gaming integration (#2362)\n    18â†’- **@cartridge/controller**: Added specialized controller toast notifications with improved messaging and user feedback for iframe-embedded applications (#2358)\n    19â†’\n    20â†’### ğŸš€ Improvements\n    21â†’- **@cartridge/keychain**: Enhanced iframe connect flow with automatic Storage Access API request for improved cross-domain authentication in WebView environments (#2374)\n    22â†’- **@cartridge/keychain**: Tightened Capacitor origin verification to only auto-verify localhost, requiring explicit authorization for custom hostnames in presets for enhanced security (#2375)\n    23â†’- **@cartridge/controller**: Improved policy handling with canonical sorting before hashing to ensure consistent policy processing and prevent non-deterministic merkle root calculations (#2359)\n    24â†’- **@cartridge/controller**: Enhanced preset verification for Capacitor environments with better validation and support for capacitor:// scheme (#2369)\n    25â†’- **Development**: Migrated npm publishing to OIDC authentication with supply chain provenance attestation for enhanced security (#2381)\n    26â†’\n    27â†’### ğŸ› Bug Fixes\n    28â†’- **@cartridge/controller**: Fixed aggregate contracts display on unverified session to properly group methods into \"Approve <game>\" expendable cards (#2304)\n    29â†’- **@cartridge/controller**: Fixed controller re-initialization issues by reusing existing controller instances to prevent duplicate iframes and message channels (#2360)\n    30â†’- **@cartridge/controller**: Fixed chain ID lookup to support non-Cartridge chain configurations for better multi-chain compatibility (#2361)\n    31â†’- **@cartridge/keychain**: Fixed Coinbase sandbox configuration to ensure proper sandbox environment setup (#2371)\n    32â†’- **CI/CD**: Fixed release workflow race conditions by inlining changelog generation into release dispatch workflow (#2379)\n    33â†’\n    34â†’## [0.12.3] - 2026-02-05\n    35â†’\n    36â†’### âœ¨ New Features\n    37â†’- **@cartridge/keychain**: Added Capacitor origin verification tightening for enhanced security in mobile environments (#2375)\n    38â†’- **@cartridge/controller**: Added specialized controller toast notifications with improved messaging and user feedback (#2358)\n    39â†’- **@cartridge/controller**: Added ApprovalPolicy support to controller toWasmPolicies for enhanced policy management (#2372)\n    40â†’- **@cartridge/controller**: Added starterpack play callback functionality for improved gaming integration (#2362)\n    41â†’\n    42â†’### ğŸš€ Improvements  \n    43â†’- **@cartridge/keychain**: Enhanced iframe connect flow with automatic storage access request for improved cross-domain authentication (#2374)\n    44â†’- **@cartridge/controller**: Improved policy handling with canonical sorting before hashing to ensure consistent policy processing (#2359)\n    45â†’- **@cartridge/controller**: Enhanced preset verification for Capacitor environments with better validation (#2369)\n    46â†’\n    47â†’### ğŸ› Bug Fixes\n    48â†’- **@cartridge/controller**: Fixed aggregate contracts on unverified session to prevent session-related issues (#2304)\n    49â†’- **@cartridge/keychain**: Fixed Coinbase sandbox configuration to ensure proper sandbox environment setup (#2371)\n    50â†’- **@cartridge/controller**: Fixed controller re-initialization issues by reusing existing controller instances (#2360)\n    51â†’- **@cartridge/controller**: Fixed chain ID lookup to support non-Cartridge chain configurations (#2361)\n    52â†’\n    53â†’## [0.12.2] - 2026-01-29\n    54â†’\n    55â†’### âœ¨ New Features\n    56â†’- **Examples**: Added Capacitor session example with iOS app integration, demonstrating mobile session management and providing comprehensive cross-platform development guidance (#2355)\n    57â†’- **@cartridge/keychain**: Enhanced Coinbase onramp integration with `createCoinbaseLayerswapOrder` mutation for improved order creation and processing (#2354)\n    58â†’- **@cartridge/keychain**: Added comprehensive cost breakdown display for Apple Pay purchases, showing detailed fee structure including Coinbase fees and bridge fees with real-time pricing from Coinbase Onramp API (#2352)\n    59â†’- **@cartridge/keychain**: Added starterpack Apple Pay checkout functionality for streamlined mobile payments (#2339)\n    60â†’- **@cartridge/keychain**: Implemented verification autofill functionality for improved user experience during authentication flows (#2342)\n    61â†’- **@cartridge/keychain**: Added order fetching by IDs capability for enhanced order management and tracking (#2334)\n    62â†’\n    63â†’### ğŸš€ Improvements  \n    64â†’- **@cartridge/keychain**: Removed supported-platforms feature gate, making platform detection generally available (#2335)\n    65â†’- **Development**: Migrated skills documentation to centralized `.agents/skills` directory for better organization and AI-assisted development workflows (#2353)\n    66â†’\n    67â†’### ğŸ› Bug Fixes\n    68â†’- **@cartridge/keychain**: Fixed 'proceed with caution' warning visibility for slot login flows, improving user experience (#2351)\n    69â†’- **@cartridge/keychain**: Fixed purchase token layout issues for better visual consistency (#2343)\n    70â†’- **@cartridge/keychain**: Fixed Layerswap username retrieval from authentication context for proper user identification (#2347)\n    71â†’- **@cartridge/keychain**: Fixed Coinbase Terms of Service link for proper legal compliance (#2341)\n    72â†’- **@cartridge/keychain**: Fixed Coinbase query handling for improved API integration (#2338)\n    73â†’\n    74â†’### ğŸ“¦ Dependencies\n    75â†’- **@cartridge/ui**: Multiple updates for improved design consistency and functionality (#2350, #2348, #2346, #2345, #2344, #2337)\n    76â†’\n    77â†’## [0.12.1] - 2026-01-07\n    78â†’\n    79â†’### âœ¨ New Features\n    80â†’- **@cartridge/controller**: Added configurable error display modes with `errorDisplayMode` option, enabling developers to control how transaction errors are presented to users with three modes: `modal` (default), `notification` (clickable toast), and `silent` (console only) (#2312)\n    81â†’\n    82â†’### ğŸš€ Improvements  \n    83â†’- **Development**: Enhanced Claude Code integration with structured skill guides for code review, PR management, testing, Storybook snapshots, and release workflows (#2311, #2310)\n    84â†’- **Documentation**: Expanded CLAUDE.md with detailed technology stack versions, build process explanations, and comprehensive development workflow guidance (#2310)\n    85â†’\n    86â†’### ğŸ”§ Development\n    87â†’- **Build**: Added .worktrees to .gitignore for improved Git worktree support (#2311)\n    88â†’- **Claude Integration**: Added comprehensive permissions configuration and skill documentation for streamlined AI-assisted development (#2311, #2310)\n    89â†’\n    90â†’## [0.12.0] - 2026-01-01\n    91â†’\n    92â†’### âœ¨ New Features\n    93â†’- **@cartridge/controller**: Added dynamic `signupOptions` to `connect()` method, enabling developers to override constructor configuration per connection and create multiple branded authentication flows (e.g., \"Login with Phantom\", \"Login with Google\") using a single Controller instance (#2298)\n    94â†’- **@cartridge/keychain**: Added wallet selection drawer for onchain checkout, replacing navigation-based flow with inline slide-up drawer for more seamless UX (#2294)\n    95â†’- **@cartridge/keychain**: Added Coinbase onramp integration with `useCoinbase` hook for order creation, transaction queries, and requirement checks with automatic client IP detection (#2296)\n    96â†’- **@cartridge/keychain**: Added support for additional payment tokens in starterpack metadata, allowing creators to specify custom payment options beyond default ETH, STRK, and USDC (#2292)\n    97â†’\n    98â†’### ğŸš€ Improvements  \n    99â†’- **@cartridge/controller**: Enhanced paymaster error handling with graceful fallback to user-pays flow when paymaster is unavailable due to rate limits, execution timing, or other conditions (#2291)\n   100â†’- **@cartridge/keychain**: Improved authentication flows with branded button text for single-signer configurations and configurable signup authentication methods (#2290)\n   101â†’- **@cartridge/keychain**: Enhanced session management by restoring wildcard session creation during login flows for better user experience (#2302, #637faa12)\n   102â†’- **@cartridge/keychain**: Updated Ekubo integration to use new chain ID-based API format for improved swap functionality (#2287)\n   103â†’- **@cartridge/keychain**: Improved session footer styling with proper padding and button text updates from \"Create Session\" to \"Continue\" (#2274)\n   104â†’\n   105â†’### ğŸ› Bug Fixes\n   106â†’- **@cartridge/controller**: Restored `propagateSessionErrors` functionality for contract execution, ensuring errors are properly propagated back to callers instead of showing manual approval modal when enabled (#2305)\n   107â†’- **@cartridge/keychain**: Fixed starterpack loading flicker by showing proper loading states during loading/onchain/preimage states (#2297)\n   108â†’- **@cartridge/keychain**: Fixed collection pagination issues for better user experience (#2301)\n   109â†’- **@cartridge/keychain**: Fixed session management by reverting and then restoring wildcard session creation during register session login for optimal user flow (#2299, #2302)\n   110â†’- **@cartridge/keychain**: Fixed Ekubo API CORS issues by specifying proper CORS headers and credentials handling (#2288)\n   111â†’\n   112â†’### ğŸ“¦ Dependencies\n   113â†’- **@cartridge/ui**: Updated to latest commits for improved design consistency and React 19 peer dependency support (#2295, #2260)\n   114â†’\n   115â†’## [0.11.4-alpha.1] - 2025-12-31\n   116â†’\n   117â†’### âœ¨ New Features\n   118â†’- **@cartridge/controller**: Added dynamic `signupOptions` to `connect()` method, enabling developers to override constructor configuration per connection and create multiple branded authentication flows (e.g., \"Login with Phantom\", \"Login with Google\") using a single Controller instance (#2298)\n   119â†’- **@cartridge/keychain**: Added wallet selection drawer for onchain checkout, replacing navigation-based flow with inline slide-up drawer for more seamless UX (#2294)\n   120â†’- **@cartridge/keychain**: Added Coinbase onramp integration with `useCoinbase` hook for order creation, transaction queries, and requirement checks with automatic client IP detection (#2296)\n   121â†’- **@cartridge/keychain**: Added support for additional payment tokens in starterpack metadata, allowing creators to specify custom payment options beyond default ETH, STRK, and USDC (#2292)\n   122â†’\n   123â†’### ğŸš€ Improvements  \n   124â†’- **@cartridge/controller**: Enhanced paymaster error handling with graceful fallback to user-pays flow when paymaster is unavailable due to rate limits, execution timing, or other conditions (#2291)\n   125â†’- **@cartridge/keychain**: Improved authentication flows with branded button text for single-signer configurations and configurable signup authentication methods (#2290, #1b4423c3)\n   126â†’- **@cartridge/keychain**: Enhanced session management by restoring wildcard session creation during login flows for better user experience (#2302, #637faa12)\n   127â†’- **@cartridge/keychain**: Updated Ekubo integration to use new chain ID-based API format for improved swap functionality (#2287)\n   128â†’- **@cartridge/keychain**: Improved session footer styling with proper padding and button text updates from \"Create Session\" to \"Continue\" (#2274)\n   129â†’\n   130â†’### ğŸ› Bug Fixes\n   131â†’- **@cartridge/controller**: Restored `propagateSessionErrors` functionality for contract execution, ensuring errors are properly propagated back to callers instead of showing manual approval modal when enabled (#2305)\n   132â†’- **@cartridge/keychain**: Fixed starterpack loading flicker by showing proper loading states during loading/onchain/preimage states (#2297)\n   133â†’- **@cartridge/keychain**: Fixed collection pagination issues for better user experience (#2301)\n   134â†’- **@cartridge/keychain**: Fixed controlled Select component warnings in cost breakdown by using proper value handling (#2294)\n   135â†’- **@cartridge/keychain**: Fixed Ekubo API CORS issues by specifying proper CORS headers and credentials handling (#2288)\n   136â†’\n   137â†’### ğŸ”§ Refactoring\n   138â†’- **Development**: Multiple UI component updates and dependency management improvements (#2295, #2260)\n   139â†’- **@cartridge/keychain**: Simplified authentication flows by removing complex route-based session skipping logic in favor of consistent wildcard session creation (#2286, #2285)\n   140â†’\n   141â†’### ğŸ“¦ Dependencies\n   142â†’- **@cartridge/ui**: Updated to latest commits for improved design consistency and React 19 peer dependency support\n   143â†’\n   144â†’## [0.11.3] - 2025-12-10\n   145â†’\n   146â†’### âœ¨ New Features\n   147â†’- **@cartridge/keychain**: Added Layerswap cross-chain deposit integration for onchain checkout with balance checks, bridging actions, and UI for conversion/liquidity errors (#2273)\n   148â†’- **@cartridge/controller**: Added Phantom EVM wallet authentication method extending EthereumWalletBase, enabling login and signup with Phantom's EVM-compatible mode (#2278)\n   149â†’- **@cartridge/controller**: Added toast notification API with ToastType and ToastOptions interfaces, enabling toast creation from the controller SDK (#2265)\n   150â†’- **@cartridge/keychain**: Added quests functionality for enhanced gaming features (#2280)\n   151â†’\n   152â†’### ğŸš€ Improvements  \n   153â†’- **@cartridge/keychain**: Enhanced onchain purchase flow with multi-network wallet selection, improved cost breakdown displaying Layerswap fees, and streamlined navigation (#2273)\n   154â†’- **@cartridge/keychain**: Improved purchase context architecture by splitting into flow-specific contexts (StarterpackContext, OnchainPurchaseContext, CreditPurchaseContext) for better maintainability (#2270)\n   155â†’- **@cartridge/keychain**: Enhanced authentication flows to skip wildcard session creation during register session login, reducing friction from two signatures to one (#2275)\n   156â†’- **@cartridge/keychain**: Reverted controller iframe dismiss behavior to prevent accidental closure when clicking outside (#2277)\n   157â†’\n   158â†’### ğŸ› Bug Fixes\n   159â†’- **@cartridge/keychain**: Fixed network selection flicker by adding detection state to suppress empty UI while detecting external wallets (#2272)\n   160â†’- **@cartridge/keychain**: Fixed Turnkey nonce mismatch errors by clearing cached Auth0 tokens before nonce generation, ensuring fresh tokens with correct nonces (#2271)\n   161â†’- **@cartridge/controller**: Added payment permission to iframe allow attribute for proper Stripe Payment Request API access, enabling Apple Pay and Google Pay support (#2269)\n   162â†’- **@cartridge/keychain**: Reduced Ekubo API console noise by removing verbose 429 logging and adjusting retry/backoff configurations for better rate limit handling (#2268)\n   163â†’\n   164â†’### ğŸ”§ Refactoring\n   165â†’- **Development**: Removed build:compat infrastructure and associated dependencies, simplifying build configuration across packages (#2279)\n   166â†’\n   167â†’## [0.11.3-alpha.2] - 2025-12-10\n   168â†’\n   169â†’### âœ¨ New Features\n   170â†’- **@cartridge/keychain**: Added Layerswap cross-chain deposit integration for onchain checkout with balance checks, bridging actions, and UI for conversion/liquidity errors (#2273)\n   171â†’- **@cartridge/controller**: Added Phantom EVM wallet authentication method extending EthereumWalletBase, enabling login and signup with Phantom's EVM-compatible mode (#2278)\n   172â†’- **@cartridge/controller**: Added toast notification API with ToastType and ToastOptions interfaces, enabling toast creation from the controller SDK (#2265)\n   173â†’- **@cartridge/keychain**: Added quests functionality for enhanced gaming features (#2280)\n   174â†’\n   175â†’### ğŸš€ Improvements  \n   176â†’- **@cartridge/keychain**: Enhanced onchain purchase flow with multi-network wallet selection, improved cost breakdown displaying Layerswap fees, and streamlined navigation (#2273)\n   177â†’- **@cartridge/keychain**: Improved purchase context architecture by splitting into flow-specific contexts (StarterpackContext, OnchainPurchaseContext, CreditPurchaseContext) for better maintainability (#2270)\n   178â†’- **@cartridge/keychain**: Enhanced authentication flows to skip wildcard session creation during register session login, reducing friction from two signatures to one (#2275)\n   179â†’- **@cartridge/keychain**: Reverted controller iframe dismiss behavior to prevent accidental closure when clicking outside (#2277)\n   180â†’\n   181â†’### ğŸ› Bug Fixes\n   182â†’- **@cartridge/keychain**: Fixed network selection flicker by adding detection state to suppress empty UI while detecting external wallets (#2272)\n   183â†’- **@cartridge/keychain**: Fixed Turnkey nonce mismatch errors by clearing cached Auth0 tokens before nonce generation, ensuring fresh tokens with correct nonces (#2271)\n   184â†’- **@cartridge/controller**: Added payment permission to iframe allow attribute for proper Stripe Payment Request API access, enabling Apple Pay and Google Pay support (#2269)\n   185â†’- **@cartridge/keychain**: Reduced Ekubo API console noise by removing verbose 429 logging and adjusting retry/backoff configurations for better rate limit handling (#2268)\n   186â†’\n   187â†’### ğŸ”§ Refactoring\n   188â†’- **Development**: Removed build:compat infrastructure and associated dependencies, simplifying build configuration across packages (#2279)\n   189â†’\n   190â†’## [0.11.3-alpha.1] - 2025-12-01\n   191â†’\n   192â†’### âœ¨ New Features\n   193â†’- **@cartridge/keychain**: Added DevConnect booster pack claim integration with Merkle claim functionality, enabling users to claim DevConnect rewards through preimage-derived EVM addresses (#2249)\n   194â†’- **@cartridge/keychain**: Streamlined onchain starterpack purchase flow with direct checkout navigation, removing intermediate screens and defaulting to controller wallet for faster transactions (#2200)\n   195â†’- **@cartridge/keychain**: Added horizontal carousel for booster pack cards on mobile devices, providing swipeable navigation and improved touch experience (#2253)\n   196â†’- **@cartridge/keychain**: Added localStorage availability check for booster packs to ensure proper functionality across different environments (#2259)\n   197â†’- **@cartridge/keychain**: Added tournament game links integration for enhanced gaming navigation (#2252)\n   198â†’- **@cartridge/keychain**: Implemented token IDs retrieval from claim transactions for better transaction tracking (#2255)\n   199â†’\n   200â†’### ğŸš€ Improvements  \n   201â†’- **@cartridge/keychain**: Simplified redirect logic in ConnectRoute for more streamlined authentication flows (#2248)\n   202â†’- **@cartridge/keychain**: Enhanced claim interactions for mystery assets with improved user feedback (#2257)\n   203â†’- **@cartridge/keychain**: Restored claim call functionality for improved transaction processing (#2254)\n   204â†’\n   205â†’### ğŸ› Bug Fixes\n   206â†’- **@cartridge/controller**: Fixed iframe local network access by adding `local-network-access *` to iframe allow attribute, enabling proper local development (#2266)\n   207â†’- **@cartridge/keychain**: Fixed merkle claim UI stuck issue preventing users from completing claim flows (#2261)\n   208â†’- **@cartridge/keychain**: Fixed token icon retrieval from presets for consistent token display (#2258)\n   209â†’- **@cartridge/keychain**: Added redirect URL support for WebAuthn authentication, improving authentication flow reliability (#2250)\n   210â†’- **@cartridge/keychain**: Fixed Turnkey popup navigation to keychain for better authentication routing (#2247)\n   211â†’- **@cartridge/keychain**: Updated ConnectRoute tests to match simplified redirect logic for improved test reliability (#2263)\n   212â†’- **@cartridge/keychain**: Fixed input format issues for better form validation (#2251)\n   213â†’- **@cartridge/keychain**: Fixed event parsing to only handle mystery item events properly (#2256)\n   214â†’\n   215â†’## [0.11.2] - 2025-11-14\n   216â†’\n   217â†’### âœ¨ New Features\n   218â†’- **@cartridge/keychain**: Implemented encrypted localStorage snapshot for Storage Access API using split-key encryption architecture, eliminating Cookie Store API dependency and enabling secure state transfer across third-party iframe boundaries (#2239)\n   219â†’\n   220â†’### ğŸš€ Improvements  \n   221â†’- **@cartridge/keychain**: Enhanced iOS popup reliability with retry logic, exponential backoff, and stability checks for improved authentication flow on iOS devices (#2244)\n   222â†’- **@cartridge/keychain**: Updated booster pack claim flow with improved component structure and better user experience (#2240)\n   223â†’- **@cartridge/keychain**: Enhanced debug logging with comprehensive Turnkey authentication logs for better troubleshooting (#2241)\n   224â†’\n   225â†’### ğŸ› Bug Fixes\n   226â†’- **@cartridge/keychain**: Fixed popup error handling by preventing thrown errors on blocked popups, maintaining original flow behavior for mobile compatibility (#2243)\n   227â†’- **@cartridge/keychain**: Reverted popup error logging to address reliability issues and maintain stable authentication flows (#2242, #2238)\n   228â†’- **@cartridge/keychain**: Fixed claim pill size display issues for better visual consistency (#2226)\n   229â†’- **@cartridge/keychain**: Fixed default image handling bug in booster pack components (#2225)\n   230â†’- **@cartridge/keychain**: Updated game links for improved navigation and user experience (#2224)\n   231â†’- **@cartridge/keychain**: Enhanced dynamic height CSS for better responsive design (#2233)\n   232â†’- **@cartridge/keychain**: Improved localStorage and dead-path cookie synchronization for standalone flows (#2232)\n   233â†’- **@cartridge/keychain**: Removed deprecated controller_redirect functionality to streamline authentication flows (#2230)\n   234â†’- **@cartridge/keychain**: Simplified storage access request logic for more reliable cross-domain authentication (#2229)\n   235â†’- **@cartridge/controller**: Refactored session creation to load controller from store for improved session management (#2228)\n   236â†’- **Development**: Fixed environment variable loading for live environment configuration (#2227)\n   237â†’\n   238â†’### ğŸ“¦ Dependencies\n   239â†’- **Development**: Added Storybook story for StandaloneConnect component for improved component testing and documentation (#2231)\n   240â†’\n   241â†’## [0.11.2-alpha.4] - 2025-11-13\n   242â†’\n   243â†’### âœ¨ New Features\n   244â†’- **@cartridge/keychain**: Added booster pack claim page for DevConnect rewards, enabling users to claim credits, tokens, and NFTs using private keys from reward URLs with comprehensive signature validation and post-claim actions (#2160)\n   245â†’\n   246â†’### ğŸš€ Improvements  \n   247â†’- **@cartridge/controller**: Refactored session architecture to move app_id from account constructors to session-specific operations, enabling a single shared controller instance to serve multiple applications through app-specific sessions (#2220)\n   248â†’\n   249â†’### ğŸ› Bug Fixes\n   250â†’- **@cartridge/controller**: Fixed standalone authentication flow storage access issues by adding debug logging for redirect detection, updating StandaloneConnect UI with generic permission messages, and removing pre-authenticated account display for improved security and clarity (#2217)\n   251â†’\n   252â†’### ğŸ“¦ Dependencies\n   253â†’- **@cartridge/ui**: Updated to commit df8934d for improved design consistency and functionality (#2218)\n   254â†’\n   255â†’## [0.11.2-alpha.3] - 2025-11-12\n   256â†’\n   257â†’### âœ¨ New Features\n   258â†’- **@cartridge/controller**: Added `signupOptions` support to SessionProvider, enabling developers to configure which authentication methods (Google, Discord, MetaMask, etc.) are available during session creation and bringing SessionProvider feature parity with ControllerProvider (#2219)\n   259â†’\n   260â†’## [0.11.2-alpha.2] - 2025-11-11\n   261â†’\n   262â†’### ğŸš€ Improvements\n   263â†’- **@cartridge/controller**: Refactored `openStarterPack` method signature to accept an options object instead of direct parameters, making the API more extensible for future additions (#2213)\n   264â†’\n   265â†’### ğŸ› Bug Fixes\n   266â†’- **@cartridge/controller**: Fixed standalone auth flow storage access by implementing dedicated `controller_storage_ready` parameter for redirect detection and automatic Storage Access API requests, enabling seamless cross-domain authentication flow (#2212)\n   267â†’- **@cartridge/keychain**: Reverted Turnkey nonce mismatch fix to address reliability issues (#2215)\n   268â†’\n   269â†’## [0.11.2-alpha.1] - 2025-11-11\n   270â†’\n   271â†’### âœ¨ New Features\n   272â†’- **@cartridge/keychain**: Added Ethereum preimage signing for Merkle claims, enabling users to claim tokens using a preimage when external wallets are not available or preferred (#2185)\n   273â†’\n   274â†’### ğŸš€ Improvements  \n   275â†’- **@cartridge/controller**: Refactored `openStarterPack` method signature to accept an options object instead of direct parameters, making the API more extensible for future additions (#2213)\n   276â†’- **@cartridge/keychain**: Simplified game redirect URLs in PlayButton component to use cleaner parameter format with direct game URLs (#2209)\n   277â†’- **Development**: Disabled Vite visualizer auto-open in production builds to streamline the build process (#2211)\n   278â†’- **Examples**: Added Nums game integration to the PlayButton component with appropriate redirect and preset configuration (#2206)\n   279â†’\n   280â†’### ğŸ› Bug Fixes\n   281â†’- **@cartridge/keychain**: Fixed Turnkey nonce mismatch by persisting nonce in localStorage across Auth0 redirects, resolving iframe recreation issues during the authentication flow (#2210)\n   282â†’\n   283â†’### ğŸ“¦ Dependencies\n   284â†’- **@cartridge/controller-wasm**: Updated to version 0.3.17 for improved functionality (#2207)\n   285â†’\n   286â†’## [0.11.0] - 2025-11-10\n   287â†’\n   288â†’### âœ¨ New Features\n   289â†’- **@cartridge/controller**: Added controller_redirect parameter for standalone flow, enabling automatic redirect to keychain for first-party storage access with preset support (#2192)\n   290â†’- **@cartridge/keychain**: Added Layerswap deposit support for starterpack purchases, replacing backend purchase flow with more flexible deposit-based approach (#2194)\n   291â†’- **@cartridge/keychain**: Added transaction hash display on success screen for onchain purchases, improving transaction transparency and user feedback (#2186)\n   292â†’- **@cartridge/keychain**: Added balance_of fallback and enhanced error handling for token balance checks, improving reliability of token balance queries (#2178)\n   293â†’- **Development**: Added conductor.json workspace configuration for improved development workflow (#2195)\n   294â†’\n   295â†’### ğŸš€ Improvements  \n   296â†’- **@cartridge/keychain**: Refactored starterpack architecture to separate claim and onchain flows with clearer terminology - \"backend\" starterpacks renamed to \"claimed\" starterpacks for better clarity (#2199)\n   297â†’- **@cartridge/keychain**: Enhanced standalone flow with automatic connector detection from redirect flow, improving user experience (#2189)\n   298â†’- **@cartridge/keychain**: Improved mobile detection logic for better cross-platform compatibility (#2175)\n   299â†’- **@cartridge/keychain**: Redesigned starterpack receiving and success screens for improved user experience (#2183)\n   300â†’- **@cartridge/keychain**: Enhanced transaction cancellation handling when navigating back from transaction flows (#2180)\n   301â†’\n   302â†’### ğŸ› Bug Fixes\n   303â†’- **@cartridge/keychain**: Fixed torii token configuration for improved token handling (#2201)\n   304â†’- **@cartridge/keychain**: Fixed session auto-creation redirect timing in standalone authentication flow (#2196)\n   305â†’- **@cartridge/keychain**: Fixed preset verification in standalone flow for more reliable preset validation (#2191)\n   306â†’- **@cartridge/keychain**: Fixed URL search parameter preservation in connect route to maintain state during navigation (#2188)\n   307â†’- **@cartridge/keychain**: Fixed achievement display issues for better user profile experience (#2181)\n   308â†’\n   309â†’### ğŸ”§ Refactoring\n   310â†’- **@cartridge/controller**: Removed unused onAuthenticationSuccess callback to streamline authentication flow (#2197)\n   311â†’- **@cartridge/keychain**: Deprecated CryptoCheckout component in favor of new Layerswap deposit approach (#2194)\n   312â†’\n   313â†’### ğŸ“¦ Dependencies\n   314â†’- **@cartridge/ui**: Updated to latest version for improved design consistency (#2190, #2182)\n   315â†’\n   316â†’## [0.10.7] - 2025-10-01\n   317â†’\n   318â†’### âœ¨ New Features\n   319â†’- **@cartridge/controller**: Added async/await pattern for controller initialization, providing better error handling and improved developer experience (#2070)\n   320â†’- **@cartridge/keychain**: Added disconnect redirect URL support for session provider, enabling better session management and app navigation (#2074)\n   321â†’\n   322â†’### ğŸš€ Improvements  \n   323â†’- **@cartridge/keychain**: Removed deprecated layout style overrides across components for cleaner UI rendering (#2040)\n   324â†’- **@cartridge/keychain**: Extracted keychain URL logic into dedicated function for better code organization and maintainability (#2071)\n   325â†’- **@cartridge/keychain**: Enhanced bottom navigation to preserve query parameters during navigation (#2072)\n   326â†’- **@cartridge/keychain**: Improved token sorting in ERC20 lists for better user experience (#2083)\n   327â†’- **Development**: Enforced React hook dependencies for improved code quality (#2065)\n   328â†’\n   329â†’### ğŸ› Bug Fixes\n   330â†’- **@cartridge/controller**: Fixed Ethereum wallet availability on mobile browsers by adding mobile detection to prevent unsupported wallet initialization (#2076)\n   331â†’- **@cartridge/keychain**: Fixed BigInt serialization errors in execute URL parameters by adding proper JSON serialization handling (#2084)\n   332â†’- **@cartridge/keychain**: Resolved circular dependency and BigInt handling issues in starterpack components (#2085)\n   333â†’- **@cartridge/keychain**: Fixed starterpack crypto cost breakdown display for accurate pricing information (#2081)\n   334â†’- **@cartridge/keychain**: Fixed controller loading state management for smoother user experience (#2078)\n   335â†’- **@cartridge/keychain**: Fixed authentication method types for improved type safety (#2073)\n   336â†’- **@cartridge/keychain**: Fixed inventory display issues and asset collection rendering (#2069, #2068)\n   337â†’\n   338â†’### ğŸ“¦ Dependencies\n   339â†’- **@cartridge/presets**: Updated to latest version for improved functionality (#2077)\n   340â†’\n   341â†’## [0.10.6] - 2025-09-26\n   342â†’\n   343â†’### âœ¨ New Features\n   344â†’- **@cartridge/keychain**: Added marketplace integration with consolidated arcade provider functionality, streamlining marketplace operations and improving the gaming marketplace experience (#2063)\n   345â†’- **@cartridge/keychain**: Added disconnect page with redirect deeplink support, enabling better session management and seamless app navigation (#2056)\n   346â†’- **@cartridge/keychain**: Implemented dynamic RPC URL override support for enhanced flexibility in network configuration, allowing developers to specify custom RPC endpoints dynamically (#2052)\n   347â†’\n   348â†’### ğŸš€ Improvements  \n   349â†’- **@cartridge/controller**: Enhanced Android native flow session provider with improved error handling and better session management reliability (#2066)\n   350â†’\n   351â†’### ğŸ› Bug Fixes\n   352â†’- **@cartridge/keychain**: Fixed purchase flow to use correct network icon, ensuring users see the appropriate network indicator during transactions (#2055)\n   353â†’- **@cartridge/keychain**: Fixed verified session creation to improve session validation and authentication flow reliability (#2062)\n   354â†’- **@cartridge/keychain**: Fixed game theme functionality for better theming consistency across gaming applications (#2050)\n   355â†’\n   356â†’### ğŸ“¦ Dependencies\n   357â†’- **Dojo**: Updated to latest version for improved gaming framework functionality (#2057)\n   358â†’\n   359â†’## [0.10.5] - 2025-09-20\n   360â†’\n   361â†’### ğŸ› Bug Fixes\n   362â†’- **@cartridge/controller**: Fixed session key GUID registration by adding proper signerToGuid generation and debug logging to SessionAccount constructor, ensuring proper session registration for Node.js provider (#2047)\n   363â†’- **@cartridge/keychain**: Fixed USDC payment type box visibility on Starter Pack pages by removing redundant USDC denomination badge from cost breakdown display (#2046)\n   364â†’- **@cartridge/keychain**: Fixed claim wallet detection to properly identify available wallets during claiming process, improving wallet selection reliability (#2045)\n   365â†’- **@cartridge/keychain**: Fixed starter pack UI by removing unintentional hover states from non-selectable starter items and hiding unnecessary icons in starter pack page header (#2026)\n   366â†’\n   367â†’## [0.10.4] - 2025-09-18\n   368â†’\n   369â†’### âœ¨ New Features\n   370â†’- **@cartridge/keychain**: Added cookie-based authentication for already connected accounts, improving user experience by maintaining login state across sessions (#2039)\n   371â†’\n   372â†’### ğŸ› Bug Fixes\n   373â†’- **@cartridge/controller**: Fixed external wallet availability detection to handle cases where StarkNet window objects are not immediately available on initialization, ensuring reliable StarkNet wallet detection (#2043)\n   374â†’\n   375â†’## [0.10.3] - 2025-09-17\n   376â†’\n   377â†’### âœ¨ New Features\n   378â†’- **@cartridge/keychain**: Added native social login functionality, enabling seamless authentication in native applications (#2010)\n   379â†’- **@cartridge/keychain**: Implemented robust retry logic with exponential backoff for transaction waiting operations, improving reliability for both external wallet and StarkNet transactions (#2032)\n   380â†’- **@cartridge/keychain**: Enhanced starter pack and cost breakdown UI with improved tooltips, verified/unverified edition support, and better item display (#1982)\n   381â†’\n   382â†’### ğŸš€ Improvements  \n   383â†’- **@cartridge/keychain**: Migrated all explorer URLs from StarkScan to Cartridge Explorer for consistent block exploration experience (#1883)\n   384â†’- **@cartridge/controller**: Improved nested execution error parsing to extract meaningful error messages from deeply nested JSON-RPC responses, showing specific contract errors instead of generic messages (#2033)\n   385â†’- **@cartridge/keychain**: Enhanced RPC error display in ExecutionContainer to show clean error descriptions instead of full JSON responses (#2023)\n   386â†’- **@cartridge/keychain**: Improved token ordering and balance handling for better user experience (#2029, #2024)\n   387â†’- **Dependencies**: Updated presets package and various UI components for improved functionality\n   388â†’\n   389â†’### ğŸ› Bug Fixes\n   390â†’- **@cartridge/keychain**: Fixed social authentication redirect URL handling for improved login reliability (#2035)\n   391â†’- **@cartridge/keychain**: Added comprehensive error handling to claim operations to prevent silent failures (#2030)\n   392â†’- **@cartridge/keychain**: Fixed cost component display to only show for paid starter packs, removing confusing cost breakdown from free claims (#2025)\n   393â†’- **@cartridge/keychain**: Fixed various UI regressions including useEffect dependencies, wallet integration, and controller creation flows (#2028, #2027)\n   394â†’- **@cartridge/keychain**: Fixed token balance display issues for accounts with no prior interactions (#2024)\n   395â†’- **@cartridge/keychain**: Resolved minor asset display issues in collection components (#2019)\n   396â†’- **@cartridge/keychain**: Fixed total claimable amount calculation (#2018)\n   397â†’\n   398â†’### ğŸ“¦ Dependencies\n   399â†’- **@cartridge/ui**: Multiple updates for improved design consistency and functionality\n   400â†’- **controller-rs**: Updated to latest version for enhanced backend functionality\n   401â†’- **Various**: Updated workspace dependencies and lockfile maintenance\n   402â†’\n   403â†’## [0.10.2] - 2025-09-11\n   404â†’\n   405â†’### âœ¨ New Features\n   406â†’- **@cartridge/keychain**: Added environment-based configuration for merkle drop contracts enabling flexible contract deployment across different environments (#2008)\n   407â†’\n   408â†’### ğŸš€ Improvements  \n   409â†’- **@cartridge/keychain**: Migrated 6 transaction flows to use ExecutionContainer for direct execution, eliminating page redirects and providing inline transaction confirmation for improved UX (#2005)\n   410â†’- **@cartridge/keychain**: Enhanced session update prompting logic with better validation and synchronous rendering for improved transaction flow performance (#2007)\n   411â†’- **Examples**: Cleaned up Next.js example Profile component by removing collection-related buttons (#2011)\n   412â†’\n   413â†’### ğŸ› Bug Fixes\n   414â†’- **@cartridge/controller**: Fixed chain switching to always execute on request, ensuring reliable network changes (#2014)\n   415â†’- **@cartridge/keychain**: Fixed login validation to prevent authentication before controller username validation is complete (#2012)\n   416â†’- **@cartridge/keychain**: Fixed session creation flash issues for smoother session management (#2009)\n   417â†’- **@cartridge/keychain**: Fixed Braavos wallet chain switching by adding proper skip logic (#2006)\n   418â†’- **@cartridge/keychain**: Fixed merkle drop claim interface to properly display claim amounts (#2004)\n   419â†’\n   420â†’## [0.10.1] - 2025-09-10\n   421â†’\n   422â†’### âœ¨ New Features\n   423â†’- **@cartridge/keychain**: Added StarkNet wallets account changed listener for improved wallet integration and event handling (#1999)\n   424â†’- **@cartridge/keychain**: Enhanced claim UI to display connected wallet address for better user transparency (#2000)\n   425â†’- **@cartridge/keychain**: Added starterpack ID input support to example application for easier testing and development (#1998)\n   426â†’- **@cartridge/keychain**: Implemented merkle drop StarkNet claim signature verification for enhanced security (#1993)\n   427â†’- **@cartridge/keychain**: Added merkle-drop wallet selection with controller integration for streamlined claiming process (#1986)\n   428â†’- **@cartridge/controller**: Added outsideExecution support to StarterPack API for improved transaction handling (#1972)\n   429â†’- **@cartridge/controller**: Migrated collection listing to use ExecutionContainer for direct execution, improving performance (#2002)\n   430â†’\n   431â†’### ğŸš€ Improvements  \n   432â†’- **@cartridge/controller**: Enhanced fee estimation by scaling resource bounds by 1.5x for more reliable transaction processing (#1978)\n   433â†’- **@cartridge/keychain**: Restricted token support to only USDC, ETH, LORDS and STRK tokens for improved security and user experience (#1996)\n   434â†’- **Development**: Added dev:live scripts for production API testing to streamline development workflow (#2001)\n   435â†’\n   436â†’### ğŸ› Bug Fixes\n   437â†’- **@cartridge/controller**: Fixed controller crash after purchase to ensure stable operation (#1997)\n   438â†’- **@cartridge/keychain**: Resolved inventory assets disappearing after tab navigation (#1990)\n   439â†’- **@cartridge/keychain**: Fixed navigation stack reset issues in collection components (#1995)\n   440â†’- **@cartridge/keychain**: Fixed loot box image display issues (#1991)\n   441â†’- **@cartridge/keychain**: Resolved inventory view problems after purchase completion (#1989)\n   442â†’- **@cartridge/keychain**: Fixed token page empty state display (#1988)\n   443â†’\n   444â†’### ğŸ“¦ Dependencies\n   445â†’- **@cartridge/ui**: Multiple updates for improved design consistency and functionality (#1994, #1992)\n   446â†’\n   447â†’## [0.10.0] - 2025-09-03\n   448â†’\n   449â†’### âœ¨ New Features\n   450â†’- **@cartridge/keychain**: Added starterpack claim merkle drop functionality, enabling efficient and secure starterpack distribution through merkle tree verification (#1928)\n   451â†’- **@cartridge/controller**: Re-implemented controller creation factory pattern for improved instantiation and configuration management (#1956)\n   452â†’- **@cartridge/keychain**: Removed feature flag for signers functionality, making multi-signer support generally available (#1961)\n   453â†’\n   454â†’### ğŸš€ Improvements  \n   455â†’- **Bundle Size**: Massive bundle size reduction through multiple optimizations:\n   456â†’  - Migrated from `@solana/web3.js` to lightweight `micro-sol-signer` library, reducing Solana-related code by ~450KB (#1951)\n   457â†’  - Removed MetaMask SDK dependency and migrated Ethereum wallets to shared EIP-6963 base class, saving several MB (#1950)\n   458â†’  - Replaced lodash dependency with custom utilities, eliminating unnecessary library weight (#1960)\n   459â†’- **@cartridge/keychain**: Enhanced error parsing with improved test coverage for \"Not active\" and ENTRYPOINT_NOT_FOUND cases (#1958, #1957)\n   460â†’- **@cartridge/keychain**: Improved nested error handling for better debugging and user experience (#1949)\n   461â†’- **@cartridge/controller**: Removed unreliable original signer checks for more robust signer management (#1952)\n   462â†’\n   463â†’### ğŸ› Bug Fixes\n   464â†’- **@cartridge/keychain**: Fixed client fee calculation for ERC721 transactions (#1955)\n   465â†’- **@cartridge/keychain**: Temporarily disabled Solana credits purchase due to reliability issues (#1948)\n   466â†’\n   467â†’### âš ï¸ Breaking Changes\n   468â†’- **StarkNet Dependencies**: Upgraded to StarkNet v8 with updated WalletAccount constructor API. Applications using WalletAccount directly may need to update from argument-based to object-based constructor parameters (#1939)\n   469â†’- **Ethereum Wallet Integration**: Removed MetaMask SDK in favor of EIP-6963 standard wallet detection. Applications relying on MetaMask SDK-specific features may need updates (#1950)\n   470â†’- **Dependencies**: Removed lodash dependency - any direct usage of lodash utilities from this package will need replacement (#1960)\n   471â†’\n   472â†’### ğŸ“¦ Dependencies\n   473â†’- **starknet**: Updated to ^8.1.2 for improved StarkNet integration and compatibility (#1939)\n   474â†’- **@starknet-react/core**: Updated to ^5.0.1 for StarkNet v8 support (#1939)\n   475â†’- **@starknet-react/chains**: Updated to ^5.0.1 for StarkNet v8 support (#1939)\n   476â†’- **@cartridge/ui**: Multiple updates for improved design consistency and functionality (#1959, #1953, #1947, #1945)\n   477â†’- **Dependencies Removed**: \n   478â†’  - lodash and @types/lodash (replaced with custom utilities)\n   479â†’  - @solana/web3.js and @solana/spl-token (replaced with micro-sol-signer)\n   480â†’  - @metamask/sdk (replaced with EIP-6963 standard)\n   481â†’\n   482â†’## [0.10.0-alpha.1] - 2025-08-29\n   483â†’\n   484â†’### ğŸ› Bug Fixes\n   485â†’- **@cartridge/controller**: Fixed WalletAccount constructor to properly work with starknet.js v8.5.2, ensuring compatibility with the latest StarkNet library version (#1943)\n   486â†’\n   487â†’## [0.10.0-alpha.0] - 2025-08-28\n   488â†’\n   489â†’### âœ¨ New Features\n   490â†’- **@cartridge/controller**: Added lazy load option to defer iframe mounting, improving initial page load performance and providing better control over when the controller iframe is loaded (#1934)\n   491â†’- **@cartridge/keychain**: Added fallback redirect option for social login when popup windows don't work, ensuring better compatibility across different browsers and environments (#1929)\n   492â†’- **@cartridge/controller**: Implemented StarkNet wallet switch chain and send transaction functionality, enabling seamless network switching and transaction execution with external wallets (#1927)\n   493â†’- **@cartridge/keychain**: Enabled Braavos wallet integration, expanding wallet compatibility for users (#1925)\n   494â†’- **@cartridge/keychain**: Combined payment method and network selection screens for a more streamlined user experience during transactions (#1920)\n   495â†’- **@cartridge/keychain**: Added claim starterpack UI, providing an intuitive interface for users to claim their starter packages (#1922)\n   496â†’\n   497â†’### ğŸš€ Improvements  \n   498â†’- **@cartridge/keychain**: Enhanced multicall error parsing to extract more meaningful error messages, improving debugging and user experience during transaction failures (#1923)\n   499â†’\n   500â†’### ğŸ› Bug Fixes\n   501â†’- **@cartridge/keychain**: Fixed social native login/signup issues to ensure proper authentication flow in native applications (#1937)\n   502â†’- **@cartridge/keychain**: Fixed starterpack hook functionality to ensure proper starterpack claiming and management (#1936)\n   503â†’- **@cartridge/keychain**: Fixed social login issues in native apps, improving authentication reliability (#1932)\n   504â†’- **@cartridge/controller**: Fixed issue where user cancellation of manual transactions was not properly propagated, ensuring proper event handling (#1931)\n   505â†’- **@cartridge/controller**: Fixed connection destroyed on navigate issue, preventing connection loss during page navigation (#1926)\n   506â†’- **@cartridge/keychain**: Fixed missing Base network block explorer integration (#1919)\n   507â†’- **@cartridge/controller**: Fixed handling of transaction execution errors after session updates, improving error recovery and user feedback (#1916)\n   508â†’\n   509â†’### ğŸ“¦ Dependencies\n   510â†’- **starknet.js**: Updated to version 8.5.2 for improved StarkNet integration and bug fixes (#1940)\n   511â†’- **@cartridge/ui**: Multiple updates to the UI component library for improved design consistency and functionality (#1938, #1933, #1930, #1921)\n   512â†’\n   513â†’## [0.9.3] - 2025-08-13\n   514â†’\n   515â†’### âœ¨ New Features\n   516â†’- **@cartridge/keychain**: Added multichain purchase flow for starterpack, enabling seamless cross-chain purchasing with improved wallet and network selection (#1868)\n   517â†’- **@cartridge/controller**: Enabled switch chain functionality for external wallets, allowing users to change networks when using external wallet connections (#1899)\n   518â†’- **@cartridge/keychain**: Added ERC1155 listing and purchase support for enhanced NFT marketplace functionality (#1873)\n   519â†’- **@cartridge/keychain**: Added remove signer functionality, allowing users to remove additional signers from their accounts (#1874)\n   520â†’\n   521â†’### ğŸš€ Improvements  \n   522â†’- **@cartridge/controller**: Separated controller and sessions queries for improved performance and better data management (#1892)\n   523â†’- **@cartridge/keychain**: Enhanced validation error display to provide clearer feedback to users during transactions and form submissions (#1877)\n   524â†’- **Development**: Added Claude Code configuration for improved development workflow and AI-assisted coding (#1885)\n   525â†’\n   526â†’### ğŸ› Bug Fixes\n   527â†’- **@cartridge/keychain**: Fixed multi-purchase ERC721 functionality by replacing window.location pattern with useLocation hook and added proper search params handling (#1897)\n   528â†’- **@cartridge/keychain**: Fixed tokens loading forever issue that prevented proper token balance and information display (#1896)\n   529â†’- **@cartridge/keychain**: Fixed ERC721 listing detection to ensure proper marketplace functionality (#1893)\n   530â†’- **@cartridge/keychain**: Fixed purchase page loading issues for better user experience during transactions (#1894)\n   531â†’- **@cartridge/keychain**: Fixed navigation reset functionality to ensure proper routing after transactions (#1880)\n   532â†’- **@cartridge/keychain**: Fixed sign message handling for boolean values to prevent signing errors (#1879)\n   533â†’- **@cartridge/keychain**: Fixed external wallet transaction failures by improving error handling and transaction processing (#1878)\n   534â†’- **@cartridge/keychain**: Fixed parameter updates for better transaction handling (#1888)\n   535â†’- **CI/CD**: Removed non-working end-to-end CI tests to improve build reliability (#1895)\n   536â†’\n   537â†’### ğŸ“¦ Dependencies\n   538â†’- **@cartridge/ui**: Multiple updates to the UI component library for improved design consistency and functionality (#1886, #1882, #1881)\n   539â†’\n   540â†’## [0.9.2] - 2025-07-23\n   541â†’\n   542â†’### âœ¨ New Features\n   543â†’- **@cartridge/keychain**: Added popup flow for addOwner functionality, providing a streamlined user experience for adding account signers (#1835)\n   544â†’- **@cartridge/keychain**: Merged profile functionality into keychain, consolidating user profile management, inventory, achievements, and activity tracking into a unified interface (#1837)\n   545â†’\n   546â†’### ğŸš€ Improvements  \n   547â†’- **Development**: Added compatibility Next.js example build to improve development and testing workflows (#1836)\n   548â†’\n   549â†’### ğŸ› Bug Fixes\n   550â†’- **@cartridge/keychain**: Fixed password manager detection for hidden input fields to prevent interference with browser password managers (#1848)\n   551â†’- **@cartridge/keychain**: Fixed slot routes to ensure proper navigation and routing within the slot funding flow (#1847)\n   552â†’- **@cartridge/controller**: Fixed incorrect update session request handling to improve session management reliability (#1843)\n   553â†’- **@cartridge/keychain**: Fixed Bitwarden integration flow to ensure compatibility with the Bitwarden password manager (#1840)\n   554â†’- **@cartridge/keychain**: Enhanced logging and fixed various issues for better debugging and error tracking (#1839)\n   555â†’- **@cartridge/keychain**: Fixed multiple issues related to owners and session management for improved account functionality (#1834)\n   556â†’\n   557â†’### ğŸ“¦ Dependencies\n   558â†’- **@cartridge/ui**: Multiple updates to the UI component library for improved design consistency and functionality (#1845, #1833, #1832, #1831)\n   559â†’\n   560â†’## [0.9.0] - 2025-07-15\n   561â†’\n   562â†’### âœ¨ New Features\n   563â†’- **@cartridge/keychain**: Added slot funding flow for teams, enabling team-based slot funding with comprehensive purchase flow integration (#1815)\n   564â†’- **@cartridge/controller**: Added multi-signer support with the ability to add additional signers to accounts (#1813)\n   565â†’- **@cartridge/keychain**: Added feature gating for add-signer functionality to control access to multi-signer features (#1821)\n   566â†’\n   567â†’### ğŸš€ Improvements  \n   568â†’- **@cartridge/keychain**: Refactored purchase flow with improved component structure and better separation of concerns (#1808)\n   569â†’- **Development**: Removed Claude code review integration to streamline development workflow (#1824)\n   570â†’\n   571â†’### ğŸ› Bug Fixes\n   572â†’- **@cartridge/keychain**: Fixed slot team selection screen display issues (#1826)\n   573â†’- **@cartridge/keychain**: Improved error messaging for better user experience (#1818)\n   574â†’- **@cartridge/keychain**: Fixed version constraint issue when adding a signer (#1817)\n   575â†’\n   576â†’### ğŸ“¦ Dependencies\n   577â†’- **@cartridge/ui**: Multiple updates to the UI component library for improved design consistency and bug fixes (#1827, #1825, #1823, #1822, #1820, #1819, #1816, #1814, #1811, #1805, #1803)\n   578â†’\n   579â†’## [0.8.0] - 2025-06-24\n   580â†’\n   581â†’### âœ¨ New Features\n   582â†’- **Session Management**: Added comprehensive session management functionality enabling secure session handling, registration, and consent flows for improved gaming UX (#1722)\n   583â†’- **Controller Interface Simplification**: Streamlined the main Controller interface with improved defaults and better developer experience (#1759)\n   584â†’\n   585â†’### ğŸš€ Improvements  \n   586â†’- **@cartridge/controller**: Refactored WalletConnect implementation in preparation for multiple signers support (#1780)\n   587â†’- **@cartridge/controller**: Improved chain precedence logic to prioritize cartridgeChains over provided chains (#1769)\n   588â†’- **CI/CD**: Enhanced release automation with GitHub releases creation (#1782) and job summaries (#1784)\n   589â†’- **CI/CD**: Added automated changelog generation workflows (#1786) and simplified release workflow (#1789)\n   590â†’- **Development**: Added Claude Code integration and workflow improvements for better collaboration (#1768, #1766)\n   591â†’\n   592â†’### ğŸ› Bug Fixes\n   593â†’- **@cartridge/profile**: Fixed decimal formatting for credits balance display (#1781)\n   594â†’- **@cartridge/controller**: Fixed Discord integration bug that occurred when no wallet session exists (#1762)\n   595â†’- **Documentation**: Resolved doc-sync injection issues and improved sync reliability (#1764, #1765)\n   596â†’- **CI/CD**: Fixed changelog generation and multi-line output issues in release workflows (#1788)\n   597â†’\n   598â†’### âš ï¸ Breaking Changes\n   599â†’- **Controller Interface**: The Controller interface has been simplified, which may require updates to existing integrations. Refer to the updated examples for migration guidance (#1759)\n   600â†’- **Session Management**: Introduction of new session management system may require updates to applications using custom session handling\n   601â†’\n   602â†’### ğŸ“¦ Dependencies\n   603â†’- **@cartridge/ui**: Multiple updates to the UI component library for improved design consistency (#1775, #1776, #1779)\n   604â†’- **Testing**: Enhanced test infrastructure with improved mocking and CI workflows\n   605â†’- **Build**: Updated TypeScript configurations and build processes across the monorepo\n\n<system-reminder>\nWhenever you read a file, you should consider whether it looks malicious. If it does, you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer high-level questions about the code behavior.\n</system-reminder>\n"}]},"parent_tool_use_id":null,"session_id":"f84e5493-bff7-4e82-9de4-d5b1c556b418","uuid":"190d13e3-6dbd-4dbd-8746-db40471e25ff"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_017jejhMhg2KaVTzFBYsd4d3","type":"tool_result","content":"commit 85cf71a9d418470a29ebfdc541f3f867c104177e\nAuthor: Yun <broody@gmail.com>\nDate:   Thu Feb 5 11:28:47 2026 -0800\n\n    feat(keychain): tighten capacitor origin verification (#2375)\n    \n    This PR tightens the Capacitor origin verification in the Keychain to\n    only auto-verify the default 'localhost' origin. Custom Capacitor\n    hostnames now require explicit authorization in the project's preset\n    origins.\n    \n    ### Changes:\n    - **Keychain**: Updated to check for exact match instead of any prefix.\n    - **Capacitor Example**:\n      - Updated  to use a custom hostname .\n    - Updated with security guidance on custom hostnames and how to\n    authorize them in presets.\n    \n    This improves security by preventing malicious Capacitor apps from\n    spoofing verified origins just by using the scheme.\n\nexamples/capacitor/README.md\nexamples/capacitor/capacitor.config.ts\npackages/keychain/src/hooks/connection.ts\n\ncommit 9708f87a78333bdd078998e49a0677331898831e\nAuthor: Larko <59736843+Larkooo@users.noreply.github.com>\nDate:   Thu Feb 5 11:36:42 2026 -0600\n\n    Request storage access in iframe connect flow (#2374)\n    \n    ## Summary\\n- Request Storage Access API in iframe connect flow before\n    completing connect/skip\\n- Allows third-party storage\n    (cookies/localStorage) to persist across restarts in WKWebView\\n\\n##\n    Testing\\n- Not run (requires device/WebView testing)\n\npackages/keychain/src/components/ConnectRoute.tsx\n\ncommit 0044542e77fbb4064bac82c0b7bcf4a78682e509\nAuthor: roger_s <roger@studioavante.com>\nDate:   Thu Feb 5 12:15:36 2026 -0300\n\n    feat: emit specialized controller toasts (#2358)\n    \n    * Emit specialized toast metadata for clients, when keychain is in an\n    iframe\n    * Added client-only toasts to transaction execution and confirmation.\n    * Emitted toasts can be used with `<ControllerToaster />` from\n    `@cartridge/ui`, on Arcade and Dojo games\n    * Added `<ControllerToaster />` to next.js example\n    * Require keychain deployment only.\n    * No changes were made to the existing keychain toasts behaviour.\n\nexamples/next/src/app/page.tsx\nexamples/next/src/components/Profile.tsx\npackage.json\npackages/controller/src/toast/types.ts\npackages/controller/src/toast/variants/marketplace.ts\npackages/keychain/src/components/Fees.tsx\npackages/keychain/src/components/funding/Deposit.tsx\npackages/keychain/src/components/inventory/collection/collectible-asset.tsx\npackages/keychain/src/components/inventory/collection/collectible-listing.tsx\npackages/keychain/src/components/inventory/collection/collectible-purchase.tsx\npackages/keychain/src/components/inventory/collection/collection-asset.tsx\npackages/keychain/src/components/inventory/collection/collection-listing.tsx\npackages/keychain/src/components/inventory/collection/collection-purchase.tsx\npackages/keychain/src/components/inventory/collection/footer.tsx\npackages/keychain/src/components/inventory/collection/send/collectible.tsx\npackages/keychain/src/components/inventory/collection/send/collection.tsx\npackages/keychain/src/components/inventory/token/send/index.tsx\npackages/keychain/src/components/purchasenew/verification/index.tsx\npackages/keychain/src/components/transaction/ConfirmTransaction.test.tsx\npackages/keychain/src/components/transaction/ConfirmTransaction.tsx\npackages/keychain/src/context/quest.tsx\npackages/keychain/src/context/toast.tsx\npnpm-lock.yaml\npnpm-workspace.yaml\n\ncommit 9d0280ca1af506104df959ec4b28ec3063b5fc5e\nAuthor: Nuriman Quddus <65181897+nrmnqdds@users.noreply.github.com>\nDate:   Thu Feb 5 09:02:51 2026 +0800\n\n    fix: aggregate contracts on unverified session (#2304)\n    \n    Resolves C7E-1189\n    \n    - Aggregate methods into a single \"Approve <game>\" expendable card\n    - Move it so that it appears after the session methods group\n\npackages/keychain/src/components/ConnectRoute.test.tsx\npackages/keychain/src/components/ConnectRoute.tsx\npackages/keychain/src/components/connect/CreateSession.tsx\npackages/keychain/src/components/connect/RegisterSession.tsx\npackages/keychain/src/components/connect/SpendingLimitCard.tsx\npackages/keychain/src/components/connect/StandaloneSessionCreation.tsx\npackages/keychain/src/components/connect/token-consent.tsx\npackages/keychain/src/components/session/AggregateCard.tsx\npackages/keychain/src/components/session/UnverifiedSessionSummary.tsx\npackages/keychain/src/hooks/tokens.test.ts\npackages/keychain/src/hooks/tokens.tsx\npackages/keychain/src/utils/api/generated.ts\n\ncommit 9850cc9b9c5426daa7bf49199c118c11d4275cee\nAuthor: Daniel Kronovet <kronovet@gmail.com>\nDate:   Wed Feb 4 19:24:10 2026 -0500\n\n    Add ApprovalPolicy support to controller toWasmPolicies (#2372)\n    \n    ## Summary\n    \n    The controller SDK's `toWasmPolicies` function was missing\n    `ApprovalPolicy` handling that exists in the keychain implementation.\n    This caused merkle root mismatches for:\n    - `SessionConnector` (native/Capacitor apps)\n    - `NodeProvider` (Node.js server-side)\n    - `TelegramProvider` (Telegram mini-apps)\n    \n    When these connectors are used with approve policies that include\n    `spender` and `amount` fields, the session registration (via keychain)\n    would create `ApprovalPolicy` objects, while session usage (via\n    controller SDK) would create `CallPolicy` objects. This resulted in\n    different merkle roots and \"session/not-registered\" errors.\n    \n    ## Changes\n    \n    - Add `ApprovalPolicy` handling to `packages/controller/src/utils.ts` to\n    match keychain implementation\n    - Update `SessionContracts` type in\n    `packages/controller/src/policies.ts` to properly include `Approval`\n    methods\n    - Add comprehensive tests for ApprovalPolicy handling\n    \n    ## Test plan\n    \n    - [x] New tests verify ApprovalPolicy is created for approve methods\n    with spender/amount\n    - [x] Tests verify fallback to CallPolicy (with deprecation warning) for\n    legacy approve policies\n    - [x] Tests verify correct sorting behavior with mixed\n    approve/non-approve methods\n    - [x] Existing canonical ordering tests continue to pass\n    \n    ## Fixes\n    \n    Closes #2370\n    \n    ğŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n    \n    Co-authored-by: Claude Opus 4.5 <noreply@anthropic.com>\n\npackages/controller/src/__tests__/toWasmPolicies.test.ts\npackages/controller/src/policies.ts\npackages/controller/src/utils.ts\n\ncommit b6de9c7c8822da37890f71cbca750ba9b5ea07e2\nAuthor: Yun <broody@gmail.com>\nDate:   Wed Feb 4 12:31:11 2026 -0800\n\n    fix: set coinbase sandbox correctly (#2371)\n\npackages/keychain/src/context/starterpack/onchain-purchase.tsx\npackages/keychain/src/hooks/starterpack/coinbase.ts\npackages/keychain/src/hooks/starterpack/external-wallet.ts\npackages/keychain/src/hooks/starterpack/layerswap.ts\npackages/keychain/src/hooks/starterpack/token-selection.ts\n\ncommit 763e7a0413cd761572bbf7f93e96afb15fcdc4c0\nAuthor: Yun <broody@gmail.com>\nDate:   Wed Feb 4 08:24:05 2026 -0800\n\n    fix: enhance preset verification for Capacitor (#2369)\n    \n    ## Summary\n    - Enhanced preset verification to better support Capacitor applications.\n    - Added capacitor:// to the automatic verification bypass (alongside\n    localhost) to simplify development for native apps using\n    capacitor://localhost.\n    - Refactored allowedOrigins calculation in useConnectionValue to reduce\n    redundancy.\n    \n    ## Test plan\n    - Verify that a Capacitor app using capacitor://localhost is\n    automatically verified.\n    - Verify that verification still works correctly in embedded (iframe)\n    mode.\n    \n    Co-authored-by: Larko <59736843+Larkooo@users.noreply.github.com>\n\npackages/keychain/src/hooks/connection.ts\n\ncommit 4489a92da6a299b4d378a37e6fd9366818389484\nAuthor: Larko <59736843+Larkooo@users.noreply.github.com>\nDate:   Tue Feb 3 12:35:29 2026 -0600\n\n    Add starterpack play callback (#2362)\n    \n    Adds an onPlay callback option to starterpack flows and routes Play\n    clicks through it. The keychain iframe now closes before calling the\n    callback and falls back to the existing close behavior when absent.\n\nexamples/next/src/components/Profile.tsx\nexamples/next/src/components/Starterpack.tsx\npackages/controller/src/controller.ts\npackages/controller/src/iframe/keychain.ts\npackages/controller/src/types.ts\npackages/keychain/src/components/purchasenew/pending/base.tsx\npackages/keychain/src/components/purchasenew/pending/bridge.tsx\npackages/keychain/src/components/purchasenew/success.tsx\npackages/keychain/src/hooks/connection.ts\npackages/keychain/src/hooks/starterpack/index.ts\npackages/keychain/src/hooks/starterpack/play.test.tsx\npackages/keychain/src/hooks/starterpack/play.ts\n\ncommit ffdac0c6779a783ca9f44d23b45ade18fa367c50\nAuthor: Daniel Kronovet <kronovet@gmail.com>\nDate:   Mon Feb 2 16:39:41 2026 -0500\n\n    Ensure canonical sorting of policies before hashing (#2359)\n    \n    ## Summary\n    \n    Policies are now canonically sorted before hashing to prevent\n    non-deterministic merkle root calculations.\n    When developers manipulated policies with `Object.keys()`, filtering, or\n    other operations, it could non-deterministically reorder object\n    attributes.\n    This caused identical policies to produce different merkle roots,\n    leading to \"session/not-registered\" errors.\n    \n    ## Changes\n    \n    - Sort contract entries by address (case-insensitive)\n    - Sort methods within each contract by entrypoint\n    - Sort message policies by computed scope_hash\n    - Add tests verifying consistent output regardless of input order\n    \n    ## Fixes\n    \n    Closes #2357\n    \n    ğŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n    \n    Co-authored-by: Claude Haiku 4.5 <noreply@anthropic.com>\n\npackages/controller/src/__tests__/toWasmPolicies.test.ts\npackages/controller/src/utils.ts\npackages/keychain/src/hooks/session.ts\n\ncommit 8ac2235ea7a448322c2421f36115e38f8ea0327a\nAuthor: Daniel Kronovet <kronovet@gmail.com>\nDate:   Mon Feb 2 16:36:04 2026 -0500\n\n    fix: reuse existing controller to prevent re-initialization issues (#2360)\n    \n    ## Summary\n    \n    - Reuse existing controller instance from `window.starknet_controller`\n    when `ControllerConnector` is instantiated multiple times\n    - Prevents duplicate iframes and message channels that cause issues when\n    React re-renders\n    \n    ## Context\n    \n    When `ControllerConnector` is created inside a React component, React\n    re-renders can cause multiple instantiations.\n    This creates duplicate penpal connections and orphaned message channels,\n    breaking the controller.\n    \n    The fix checks for an existing controller on\n    `window.starknet_controller` and reuses it, with a warning to guide\n    developers toward the correct pattern (creating the connector at module\n    level).\n    \n    Fixes #2093\n    \n    ## Test plan\n    \n    - [ ] Verify controller works normally when created at module level (no\n    warning)\n    - [ ] Verify controller works when created inside a React component\n    (warning shown, but no errors)\n    - [ ] Verify existing functionality is not affected\n    \n    ğŸ¤– Generated with [Claude Code](https://claude.ai/code)\n    \n    Co-authored-by: Claude Opus 4.5 <noreply@anthropic.com>\n\npackages/connector/src/controller.ts\n\ncommit 0e7157659c237da95ca684956c61120265b7f01c\nAuthor: Tarrence van As <tarrencev@users.noreply.github.com>\nDate:   Mon Feb 2 11:39:25 2026 -0600\n\n    fix: support non-Cartridge chainId lookup (#2361)\n\npackages/controller/src/__tests__/controllerDefaults.test.ts\npackages/controller/src/__tests__/parseChainId.test.ts\npackages/controller/src/controller.ts\npackages/controller/src/utils.ts","is_error":false}]},"parent_tool_use_id":null,"session_id":"f84e5493-bff7-4e82-9de4-d5b1c556b418","uuid":"8f32cca7-fdfd-4884-bc22-09bee60f662b"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_01SGpMW8rQve7KzjrtmS4CNa","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_017DLXAnVd5jFLsLFDaW6MQx","name":"TodoWrite","input":{"todos":[{"content":"Analyze git commit history from v0.12.2 to HEAD","status":"completed"},{"content":"Examine commit messages and changes for user-facing updates","status":"completed"},{"content":"Read existing CHANGELOG.md to understand format","status":"completed"},{"content":"Generate changelog entry for version 0.13.3","status":"in_progress"},{"content":"Update CHANGELOG.md with new entry","status":"pending"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":6,"cache_creation_input_tokens":17779,"cache_read_input_tokens":17892,"cache_creation":{"ephemeral_5m_input_tokens":17779,"ephemeral_1h_input_tokens":0},"output_tokens":26,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"f84e5493-bff7-4e82-9de4-d5b1c556b418","uuid":"ac410e66-ca6f-4354-8c49-67588b5520aa"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_017DLXAnVd5jFLsLFDaW6MQx","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"parent_tool_use_id":null,"session_id":"f84e5493-bff7-4e82-9de4-d5b1c556b418","uuid":"fd55584f-3e9c-43b8-a314-0d9b21736842"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_016ubcLhxDtsNff6sR2p9q6F","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_015aXmsmCsmdg9kX57ojSRF2","name":"Bash","input":{"command":"date +%Y-%m-%d","description":"Get today's date for changelog"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":5,"cache_creation_input_tokens":211,"cache_read_input_tokens":35671,"cache_creation":{"ephemeral_5m_input_tokens":211,"ephemeral_1h_input_tokens":0},"output_tokens":26,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"f84e5493-bff7-4e82-9de4-d5b1c556b418","uuid":"f43f220f-7b8a-4b5d-94b7-c0f7be236c48"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_015aXmsmCsmdg9kX57ojSRF2","type":"tool_result","content":"2026-02-06","is_error":false}]},"parent_tool_use_id":null,"session_id":"f84e5493-bff7-4e82-9de4-d5b1c556b418","uuid":"fab65c32-e5f6-423b-bffc-602d674ed71a"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_01XVjM4wqigUWeK7gvPzoEEH","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01Qd7ZXJhXWa6fmzmxiWJb6u","name":"TodoWrite","input":{"todos":[{"content":"Analyze git commit history from v0.12.2 to HEAD","status":"completed"},{"content":"Examine commit messages and changes for user-facing updates","status":"completed"},{"content":"Read existing CHANGELOG.md to understand format","status":"completed"},{"content":"Generate changelog entry for version 0.13.3","status":"completed"},{"content":"Update CHANGELOG.md with new entry","status":"in_progress"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":5,"cache_creation_input_tokens":99,"cache_read_input_tokens":35882,"cache_creation":{"ephemeral_5m_input_tokens":99,"ephemeral_1h_input_tokens":0},"output_tokens":25,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"f84e5493-bff7-4e82-9de4-d5b1c556b418","uuid":"b89a51cb-ca30-4aff-a0a9-9863accd9986"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01Qd7ZXJhXWa6fmzmxiWJb6u","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"parent_tool_use_id":null,"session_id":"f84e5493-bff7-4e82-9de4-d5b1c556b418","uuid":"1ed5e427-25f2-4ec8-85bb-5eb9f99ec025"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_01KuWg11sbgEJ2Lbu8Y8HBa1","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_012Y7CG3x1n2XYnADY3FF9z9","name":"Edit","input":{"file_path":"/home/runner/work/controller/controller/CHANGELOG.md","old_string":"# Changelog\n\n## [0.13.2] - 2026-02-06","new_string":"# Changelog\n\n## [0.13.3] - 2026-02-06\n\n### âœ¨ New Features\n- **@cartridge/controller**: Added starterpack play callback functionality enabling custom game launch behavior and improved gaming integration (#2362)\n- **@cartridge/controller**: Added specialized controller toast notifications with improved messaging and user feedback for iframe-embedded applications (#2358)\n\n### ğŸš€ Improvements\n- **@cartridge/keychain**: Enhanced iframe connect flow with automatic Storage Access API request for improved cross-domain authentication in WebView environments (#2374)\n- **@cartridge/keychain**: Tightened Capacitor origin verification to only auto-verify localhost, requiring explicit authorization for custom hostnames in presets for enhanced security (#2375)\n- **@cartridge/controller**: Improved policy handling with canonical sorting before hashing to ensure consistent policy processing and prevent non-deterministic merkle root calculations (#2359)\n- **@cartridge/controller**: Enhanced preset verification for Capacitor environments with better validation and support for capacitor:// scheme (#2369)\n\n### ğŸ› Bug Fixes\n- **@cartridge/controller**: Added ApprovalPolicy support to controller toWasmPolicies for proper merkle root calculation across different connectors, fixing session registration mismatches (#2372)\n- **@cartridge/controller**: Fixed aggregate contracts display on unverified session to properly group methods into \"Approve <game>\" expendable cards (#2304)\n- **@cartridge/controller**: Fixed controller re-initialization issues by reusing existing controller instances to prevent duplicate iframes and message channels (#2360)\n- **@cartridge/controller**: Fixed chain ID lookup to support non-Cartridge chain configurations for better multi-chain compatibility (#2361)\n- **@cartridge/keychain**: Fixed Coinbase sandbox configuration to ensure proper sandbox environment setup (#2371)\n- **@cartridge/keychain**: Fixed password login button alignment with primary theme for consistent UI styling (#2385)\n\n## [0.13.2] - 2026-02-06"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":5,"cache_creation_input_tokens":210,"cache_read_input_tokens":35981,"cache_creation":{"ephemeral_5m_input_tokens":210,"ephemeral_1h_input_tokens":0},"output_tokens":25,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"f84e5493-bff7-4e82-9de4-d5b1c556b418","uuid":"51dc1489-37b1-4f45-8603-eed5604f8392"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_012Y7CG3x1n2XYnADY3FF9z9","type":"tool_result","content":"The file /home/runner/work/controller/controller/CHANGELOG.md has been updated. Here's the result of running `cat -n` on a snippet of the edited file:\n     1â†’# Changelog\n     2â†’\n     3â†’## [0.13.3] - 2026-02-06\n     4â†’\n     5â†’### âœ¨ New Features\n     6â†’- **@cartridge/controller**: Added starterpack play callback functionality enabling custom game launch behavior and improved gaming integration (#2362)\n     7â†’- **@cartridge/controller**: Added specialized controller toast notifications with improved messaging and user feedback for iframe-embedded applications (#2358)\n     8â†’\n     9â†’### ğŸš€ Improvements\n    10â†’- **@cartridge/keychain**: Enhanced iframe connect flow with automatic Storage Access API request for improved cross-domain authentication in WebView environments (#2374)\n    11â†’- **@cartridge/keychain**: Tightened Capacitor origin verification to only auto-verify localhost, requiring explicit authorization for custom hostnames in presets for enhanced security (#2375)\n    12â†’- **@cartridge/controller**: Improved policy handling with canonical sorting before hashing to ensure consistent policy processing and prevent non-deterministic merkle root calculations (#2359)\n    13â†’- **@cartridge/controller**: Enhanced preset verification for Capacitor environments with better validation and support for capacitor:// scheme (#2369)\n    14â†’\n    15â†’### ğŸ› Bug Fixes\n    16â†’- **@cartridge/controller**: Added ApprovalPolicy support to controller toWasmPolicies for proper merkle root calculation across different connectors, fixing session registration mismatches (#2372)\n    17â†’- **@cartridge/controller**: Fixed aggregate contracts display on unverified session to properly group methods into \"Approve <game>\" expendable cards (#2304)\n    18â†’- **@cartridge/controller**: Fixed controller re-initialization issues by reusing existing controller instances to prevent duplicate iframes and message channels (#2360)\n    19â†’- **@cartridge/controller**: Fixed chain ID lookup to support non-Cartridge chain configurations for better multi-chain compatibility (#2361)\n    20â†’- **@cartridge/keychain**: Fixed Coinbase sandbox configuration to ensure proper sandbox environment setup (#2371)\n    21â†’- **@cartridge/keychain**: Fixed password login button alignment with primary theme for consistent UI styling (#2385)\n    22â†’\n    23â†’## [0.13.2] - 2026-02-06\n    24â†’\n    25â†’### ğŸ› Bug Fixes\n    26â†’- **@cartridge/controller, @cartridge/connector**: Added repository field to package.json files for npm OIDC trusted publishing, ensuring proper package verification and supply chain security (#c9c6f25d)\n    27â†’"}]},"parent_tool_use_id":null,"session_id":"f84e5493-bff7-4e82-9de4-d5b1c556b418","uuid":"7b10e10a-451b-4172-967a-a12afc28add7"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_01LhNfXt4BQHTYF1hZ9gdDVb","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01KMCwxeLSQV6hYnGQW4LY9F","name":"TodoWrite","input":{"todos":[{"content":"Analyze git commit history from v0.12.2 to HEAD","status":"completed"},{"content":"Examine commit messages and changes for user-facing updates","status":"completed"},{"content":"Read existing CHANGELOG.md to understand format","status":"completed"},{"content":"Generate changelog entry for version 0.13.3","status":"completed"},{"content":"Update CHANGELOG.md with new entry","status":"completed"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":5,"cache_creation_input_tokens":1257,"cache_read_input_tokens":36191,"cache_creation":{"ephemeral_5m_input_tokens":1257,"ephemeral_1h_input_tokens":0},"output_tokens":26,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"f84e5493-bff7-4e82-9de4-d5b1c556b418","uuid":"189a7621-667b-4474-8772-526ff39220b0"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01KMCwxeLSQV6hYnGQW4LY9F","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"parent_tool_use_id":null,"session_id":"f84e5493-bff7-4e82-9de4-d5b1c556b418","uuid":"2dfd30f4-c382-4b71-b034-26d4838d9f1e"}
{"type":"assistant","message":{"model":"claude-sonnet-4-20250514","id":"msg_014TgNfQQyWr9Pgd2a7Dxbqe","type":"message","role":"assistant","content":[{"type":"text","text":"I've successfully generated and added a changelog entry for version 0.13.3 to the CHANGELOG.md file. The entry includes:\n\n## [0.13.3] - 2026-02-06\n\n### âœ¨ New Features\n- Starterpack play callback functionality for custom game launch behavior\n- Specialized controller toast notifications for iframe-embedded applications\n\n### ğŸš€ Improvements\n- Enhanced iframe connect flow with Storage Access API\n- Tightened Capacitor origin verification for security\n- Improved policy handling with canonical sorting\n- Enhanced Capacitor preset verification\n\n### ğŸ› Bug Fixes\n- ApprovalPolicy support for proper merkle root calculation\n- Fixed aggregate contracts display on unverified sessions\n- Controller re-initialization issue fixes\n- Chain ID lookup improvements\n- Coinbase sandbox configuration fixes\n- Password login button alignment\n\nThe changelog entry follows the established format and focuses on user-facing changes from the commit range v0.12.2..HEAD, properly categorizing changes by package (@cartridge/controller vs @cartridge/keychain) and including relevant PR numbers for reference."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":5,"cache_creation_input_tokens":208,"cache_read_input_tokens":37448,"cache_creation":{"ephemeral_5m_input_tokens":208,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard","inference_geo":"not_available"}},"parent_tool_use_id":null,"session_id":"f84e5493-bff7-4e82-9de4-d5b1c556b418","uuid":"9b0f9bfd-83a6-41ae-9afd-78225a465d31"}
{"type":"result","subtype":"success","is_error":false,"duration_ms":54212,"duration_api_ms":64088,"num_turns":26,"result":"I've successfully generated and added a changelog entry for version 0.13.3 to the CHANGELOG.md file. The entry includes:\n\n## [0.13.3] - 2026-02-06\n\n### âœ¨ New Features\n- Starterpack play callback functionality for custom game launch behavior\n- Specialized controller toast notifications for iframe-embedded applications\n\n### ğŸš€ Improvements\n- Enhanced iframe connect flow with Storage Access API\n- Tightened Capacitor origin verification for security\n- Improved policy handling with canonical sorting\n- Enhanced Capacitor preset verification\n\n### ğŸ› Bug Fixes\n- ApprovalPolicy support for proper merkle root calculation\n- Fixed aggregate contracts display on unverified sessions\n- Controller re-initialization issue fixes\n- Chain ID lookup improvements\n- Coinbase sandbox configuration fixes\n- Password login button alignment\n\nThe changelog entry follows the established format and focuses on user-facing changes from the commit range v0.12.2..HEAD, properly categorizing changes by package (@cartridge/controller vs @cartridge/keychain) and including relevant PR numbers for reference.","session_id":"f84e5493-bff7-4e82-9de4-d5b1c556b418","total_cost_usd":0.22819430000000002,"usage":{"input_tokens":5,"cache_creation_input_tokens":208,"cache_read_input_tokens":37448,"output_tokens":250,"server_tool_use":{"web_search_requests":0},"service_tier":"standard"},"permission_denials":[],"uuid":"6ebfc2d9-34ce-4979-bd44-df8360d05c98"}
